!function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function i(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,l){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function r(t,e,n,l){if(t){const i=a(t,e,n,l);return t[0](i)}}function a(t,n,l,i){return t[1]&&i?e(l.ctx.slice(),t[1](i(n))):l.ctx}function u(t,e,n,l,i,s,o){const c=function(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|i[l];return t}return e.dirty|i}return e.dirty}(e,l,i,s);if(c){const i=a(e,n,l,o);t.p(i,c)}}function f(t){return null==t?"":t}function d(t,e,n=e){return t.set(n),e}function h(e){return e&&s(e.destroy)?e.destroy:t}let p,m=!1;function g(t,e,n,l){for(;t<e;){const i=t+(e-t>>1);n(i)<=l?t=i+1:e=i}return t}function $(t,e){m?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),l=new Int32Array(e.length);n[0]=-1;let i=0;for(let t=0;t<e.length;t++){const s=g(1,i+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;l[t]=n[s]+1;const o=s+1;n[o]=t,i=Math.max(o,i)}const s=[],o=[];let c=e.length-1;for(let t=n[i]+1;0!=t;t=l[t-1]){for(s.push(e[t-1]);c>=t;c--)o.push(e[c]);c--}for(;c>=0;c--)o.push(e[c]);s.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<s.length&&o[e].claim_order>=s[n].claim_order;)n++;const l=n<s.length?s[n]:null;t.insertBefore(o[e],l)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function v(t,e,n){m&&!n?$(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function y(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function k(){return w(" ")}function Q(){return w("")}function _(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function E(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}function z(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function T(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function j(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function F(t,e,n){t.classList[n?"add":"remove"](e)}function L(t){p=t}function N(){if(!p)throw new Error("Function called outside component initialization");return p}function A(t){N().$$.before_update.push(t)}function B(t){N().$$.on_mount.push(t)}function I(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const P=[],q=[],D=[],H=[],J=Promise.resolve();let V=!1;function Y(){V||(V=!0,J.then(K))}function R(t){D.push(t)}let U=!1;const W=new Set;function K(){if(!U){U=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];L(e),X(e.$$)}for(L(null),P.length=0;q.length;)q.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];W.has(e)||(W.add(e),e())}D.length=0}while(P.length);for(;H.length;)H.pop()();V=!1,U=!1,W.clear()}}function X(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const Z=new Set;let G;function tt(){G={r:0,c:[],p:G}}function et(){G.r||i(G.c),G=G.p}function nt(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function lt(t,e,n,l){if(t&&t.o){if(Z.has(t))return;Z.add(t),G.c.push((()=>{Z.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function it(t,e){const n=e.token={};function l(t,l,i,s){if(e.token!==n)return;e.resolved=s;let o=e.ctx;void 0!==i&&(o=o.slice(),o[i]=s);const c=t&&(e.current=t)(o);let r=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==l&&t&&(tt(),lt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),et())})):e.block.d(1),c.c(),nt(c,1),c.m(e.mount(),e.anchor),r=!0),e.block=c,e.blocks&&(e.blocks[l]=c),r&&K()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=N();if(t.then((t=>{L(n),l(e.then,1,e.value,t),L(null)}),(t=>{if(L(n),l(e.catch,2,e.error,t),L(null),!e.hasCatch)throw t})),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}var i}function st(t,e){const n={},l={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],c=e[s];if(c){for(const t in o)t in c||(l[t]=1);for(const t in c)i[t]||(n[t]=c[t],i[t]=1);t[s]=c}else for(const t in o)i[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function ot(t){return"object"==typeof t&&null!==t?t:{}}function ct(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function rt(t){t&&t.c()}function at(t,e,l,o){const{fragment:c,on_mount:r,on_destroy:a,after_update:u}=t.$$;c&&c.m(e,l),o||R((()=>{const e=r.map(n).filter(s);a?a.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(R)}function ut(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,n,s,o,c,r,a=[-1]){const u=p;L(e);const f=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:l(),dirty:a,skip_bound:!1};let d=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...l)=>{const i=l.length?l[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),d&&function(t,e){-1===t.$$.dirty[0]&&(P.push(t),Y(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),d=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){m=!0;const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&nt(e.$$.fragment),at(e,n.target,n.anchor,n.customElement),m=!1,K()}L(u)}class dt{$destroy(){ut(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(t,e="body"){let n;async function l(l){if("string"==typeof(e=l)){if(n=document.querySelector(e),null===n&&(await(Y(),J),n=document.querySelector(e)),null===n)throw new Error(`No element found matching css selector: "${e}"`)}else{if(!(e instanceof HTMLElement))throw new TypeError(`Unknown portal target type: ${null===e?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n=e}n.appendChild(t),t.hidden=!1}return l(e),{update:l,destroy:function(){t.parentNode&&t.parentNode.removeChild(t)}}}function pt(t){let e,n;return{c(){e=x("i"),S(e,"class",n=f("icon "+t[0])+" Q2nr7df")},m(t,n){v(t,e,n)},p(t,l){1&l&&n!==(n=f("icon "+t[0])+" Q2nr7df")&&S(e,"class",n)},d(t){t&&b(e)}}}function mt(t){let e,n,l,i,s,o;const c=t[2].default,a=r(c,t,t[1],null);let f=t[0]&&pt(t);return{c(){e=x("main"),n=x("section"),a&&a.c(),l=k(),f&&f.c(),S(n,"class","Q2nr7df"),S(e,"class","Q2nr7df")},m(t,c){v(t,e,c),$(e,n),a&&a.m(n,null),$(n,l),f&&f.m(n,null),i=!0,s||(o=h(ht.call(null,e,"body")),s=!0)},p(t,[e]){a&&a.p&&(!i||2&e)&&u(a,c,t,t[1],i?e:-1,null,null),t[0]?f?f.p(t,e):(f=pt(t),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},i(t){i||(nt(a,t),i=!0)},o(t){lt(a,t),i=!1},d(t){t&&b(e),a&&a.d(t),f&&f.d(),s=!1,o()}}}function gt(t,e,n){let{$$slots:l={},$$scope:i}=e,{icon:s="fad fa-spinner fa-pulse"}=e;return t.$$set=t=>{"icon"in t&&n(0,s=t.icon),"$$scope"in t&&n(1,i=t.$$scope)},[s,i,l]}class $t extends dt{constructor(t){super(),ft(this,t,gt,mt,o,{icon:0})}}const vt=[];function bt(e,n=t){let l;const i=[];function s(t){if(o(e,t)&&(e=t,l)){const t=!vt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),vt.push(n,e)}if(t){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,c=t){const r=[o,c];return i.push(r),1===i.length&&(l=n(s)||t),o(e),()=>{const t=i.indexOf(r);-1!==t&&i.splice(t,1),0===i.length&&(l(),l=null)}}}}let yt=bt([]);const xt=new class{info(t,e="",n="far fa-info-circle",l=3e3){this.add("info",e,t,n,l)}success(t,e="",n="far fa-check",l=3e3){this.add("success",e,t,n,l)}error(t,e="",n="far fa-exclamation-circle",l=3e3){this.add("error",e,t,n,l)}add(t,e="",n,l="far fa-user",i=3e3){let s={type:t,info:e,label:n,icon:l,hide:!1};yt.update((t=>[s,...t])),setTimeout((()=>{s.hide=!0,yt.update((t=>t))}),i),setTimeout((()=>{yt.update((t=>{let e=t.indexOf(s);return t.splice(e,1),t}))}),i+300)}},wt=bt(null),kt=bt({menu:[],lists:[],defaultAvatar:"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='iso-8859-1'%3F%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 456.001 456.001' style='enable-background:new 0 0 456.001 456.001;' xml:space='preserve'%3E%3Cg%3E%3Cpath style='fill:%23E69F5F;' d='M379.893,168c0-41.334-40.667-168-104-168c-34,0-48,8-48,8s-14-8-48-8 c-63.334,0-104,126.667-104,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32h64c0,0,62-5,96-32 c0,0-5.405-22.883,0-40C359.893,219.333,379.893,204,379.893,168z'/%3E%3Cpath style='fill:%23E09156;' d='M75.892,168c0,36,20,51.333,24,64c5.405,17.117,0,40,0,40c34,27,96,32,96,32l17.709-11.068 c-0.326-38.588-1.708-84.932-1.708-84.932l-96-72c0,0,174-56.667,112-128c0,0-14-8-48-8C116.559,0,75.892,126.667,75.892,168z'/%3E%3Cpath style='fill:%23F6B47B;' d='M387.863,414.878l-0.726-6.536c-0.287-2.586-2.616-4.449-5.201-4.161l-0.407,0.045l-7.027-56.214 c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016c-5.375-1.792-11.273-0.644-15.409,2.9l-11.579-3.86 c-6.534-2.178-10.94-8.292-10.94-15.179v-25.802l34.461-14.359c17.887-7.453,29.539-24.93,29.539-44.308v-8 c13.255,0,24-10.745,24-24s-10.745-24-24-24v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l34.462,14.359v25.801 c0,6.887-4.407,13.001-10.94,15.179l-11.425,3.808c-4.133-3.503-9.999-4.631-15.348-2.848l-39.047,13.016 c-11.691,3.897-20.105,14.161-21.634,26.389l-7.027,56.214l-0.407-0.045c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l11.702,1.3V440c0,8.837,7.164,16,16,16h40h176h40c8.837,0,16-7.163,16-16v-18.621 l11.702-1.3C386.287,419.792,388.15,417.463,387.863,414.878z'/%3E%3Cpath style='fill:%23E2A071;' d='M179.893,266.667v25.801c0,5.693-3.017,10.852-7.752,13.701 c66.923,11.563,103.75-39.499,103.752-39.503l0,0L179.893,266.667z'/%3E%3Cpath style='fill:%23FDC88E;' d='M339.893,152v-16c0-22.092-17.909-40-40-40h-144c-22.092,0-40,17.909-40,40v16 c-13.255,0-24,10.745-24,24s10.745,24,24,24v8c0,19.378,11.651,36.855,29.538,44.308l51.691,21.538 c9.75,4.063,20.208,6.154,30.77,6.154l0,0c10.562,0,21.019-2.091,30.769-6.154l51.694-21.539 c17.887-7.453,29.539-24.93,29.539-44.308v-8c13.255,0,24-10.745,24-24C363.893,162.745,353.147,152,339.893,152z'/%3E%3Cpath style='fill:%23623F33;' d='M171.893,184L171.893,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C179.893,180.4,176.293,184,171.893,184z'/%3E%3Cpath style='fill:%23623F33;' d='M283.892,184L283.892,184c-4.4,0-8-3.6-8-8v-8c0-4.4,3.6-8,8-8l0,0c4.4,0,8,3.6,8,8v8 C291.892,180.4,288.292,184,283.892,184z'/%3E%3Cpath style='fill:%23E2A071;' d='M227.893,240.219c-14.223,0-27.527-3.5-36.5-9.605c-3.652-2.484-4.601-7.461-2.113-11.113 c2.48-3.648,7.461-4.598,11.113-2.113c6.289,4.277,16.57,6.832,27.5,6.832s21.211-2.555,27.5-6.832 c3.66-2.492,8.629-1.539,11.113,2.113c2.488,3.652,1.539,8.629-2.113,11.113C255.421,236.719,242.116,240.219,227.893,240.219z'/%3E%3Cpath style='fill:%23F6B47B;' d='M247.893,90c-52.333,21.833-132,46-132,46v16c-13.255,0-24,10.745-24,24s10.745,24,24,24v8 c0,19.378,11.651,36.855,29.538,44.308l51.69,21.538c2.53,1.054,5.112,1.962,7.727,2.749 c-22.756-16.647-37.933-31.207-46.857-40.761c-6.514-6.974-10.099-16.186-10.099-25.729v-60.194c100.5-33.66,112-53.91,112-53.91 L247.893,90z'/%3E%3Cpath style='fill:%23FF4F4F;' d='M316,456.001v-40h67l-8.499-67.989c-1.529-12.228-9.943-22.492-21.634-26.389l-39.047-13.016 c-6.8-2.267-14.45,0.154-18.291,6.206C281.349,337.157,256.424,352,228.001,352s-53.349-14.844-67.53-37.188 c-3.841-6.052-11.491-8.473-18.291-6.206l-39.047,13.016c-11.691,3.897-20.105,14.161-21.634,26.389l-7.609,60.872L140.001,416v40 h176V456.001z'/%3E%3Cpath style='fill:%23F23F44;' d='M140.001,422.04v-18.106c0-7.697-2.774-15.135-7.813-20.953l-44.019-50.813 c-3.552,4.497-5.93,9.93-6.669,15.843l-8.356,66.847C85.867,415.622,119.711,419.587,140.001,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M140.001,411.507l-65.936-7.326c-2.586-0.287-4.914,1.576-5.202,4.161l-0.726,6.536 c-0.287,2.585,1.576,4.914,4.161,5.201l67.703,7.523V411.507z'/%3E%3Cpath style='fill:%23F23F44;' d='M316,422.04v-18.106c0-7.697,2.774-15.135,7.813-20.953l44.019-50.813 c3.552,4.497,5.93,9.93,6.669,15.843l8.356,66.847C370.134,415.622,336.289,419.587,316,422.04z'/%3E%3Cpath style='fill:%23FFB94C;' d='M316,411.507l65.936-7.326c2.586-0.287,4.914,1.576,5.202,4.161l0.726,6.536 c0.287,2.585-1.576,4.914-4.161,5.201L316,427.602V411.507z'/%3E%3Cpath style='fill:%23FFB94C;' d='M227.999,408c-26.51,0-48,21.49-48,48h96C275.999,429.491,254.51,408,227.999,408z'/%3E%3Cpath style='fill:%23E69F5F;' d='M110.892,112.671V136c16.714,0,87.054-12,133.714-40c0,0,40.393,52.667,100.286,56v-40.668 c0-20.564-17.516-37.182-38.997-36.998l-156.697,1.339C127.988,75.854,110.892,92.365,110.892,112.671z'/%3E%3Cpath style='fill:%23E09156;' d='M149.2,75.673c-21.211,0.181-38.307,16.693-38.307,36.998V136c1.54,0,3.538-0.103,5.928-0.31 c8.631-2.913,75.731-26.331,107.655-60.661L149.2,75.673z'/%3E%3C/g%3E%3C/svg%3E%0A"}),Qt=bt(null);class _t extends Error{response;constructor(t){super(),this.response=t}}class Et{id=null;name=null;avatar=null;constructor(t){this.id=t.id,this.name=t.name,this.avatar=t.avatar}static logout(){throw new _t(null)}static isAuthenticated(){return fetch("/api/auth").then((t=>t.json())).then((t=>{if(!1!==t){let e=new Et(t);xt.success("Authenticated",e.name??""),wt.update((()=>e))}else wt.update((()=>null))}))}static login(t,e){return fetch("/api/auth/login",{method:"post",body:JSON.stringify({login:t,password:e})}).then((t=>{if(401===t.status)throw new _t(null);if(200!==t.status)throw new Error(t.status.toString());return t.json()})).then((t=>this.isAuthenticated())).catch((t=>{if(!(t instanceof _t))throw t;xt.error("Login error","wrogin login or password")}))}}function Mt(e){return{c:t,m:t,i:t,o:t,d:t}}function St(e){return{c:t,m:t,i:t,o:t,d:t}}function Ct(t){let e,n;return e=new $t({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Ot(t){let e;return{c(){e=w("Loading")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function zt(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,y={ctx:t,current:null,token:null,hasCatch:!1,pending:Ct,then:St,catch:Mt,blocks:[,,,]};return it(h=t[2],y),{c(){e=x("main"),n=x("form"),l=x("input"),s=k(),o=x("input"),c=k(),r=x("button"),r.textContent="Login",a=w("\n\t\tpowered by "),u=x("b"),u.textContent="Atomino & Magic",f=k(),d=Q(),y.block.c(),S(l,"type","text"),S(l,"placeholder","login"),S(l,"name","login"),S(l,"class","Qhg0mfa"),S(o,"type","password"),S(o,"placeholder","password"),S(o,"name","password"),S(o,"class","Qhg0mfa"),S(r,"type","submit"),S(r,"class","Qhg0mfa"),S(n,"class","Qhg0mfa"),S(e,"class","Qhg0mfa")},m(i,h){v(i,e,h),$(e,n),$(n,l),O(l,t[0]),$(n,s),$(n,o),O(o,t[1]),$(n,c),$(n,r),$(n,a),$(n,u),v(i,f,h),v(i,d,h),y.block.m(i,y.anchor=h),y.mount=()=>d.parentNode,y.anchor=d,p=!0,m||(g=[_(l,"input",t[4]),_(o,"input",t[5]),_(n,"submit",E(t[3]))],m=!0)},p(e,[n]){t=e,1&n&&l.value!==t[0]&&O(l,t[0]),2&n&&o.value!==t[1]&&O(o,t[1]),y.ctx=t,4&n&&h!==(h=t[2])&&it(h,y)},i(t){p||(nt(y.block),p=!0)},o(t){for(let t=0;t<3;t+=1){lt(y.blocks[t])}p=!1},d(t){t&&b(e),t&&b(f),t&&b(d),y.block.d(t),y.token=null,y=null,m=!1,i(g)}}}function Tt(t,e,n){let l="elvis@elvis.hu",i="galaga",s=null;return[l,i,s,function(){n(2,s=Et.login(l,i))},function(){l=this.value,n(0,l)},function(){i=this.value,n(1,i)}]}class jt extends dt{constructor(t){super(),ft(this,t,Tt,zt,o,{})}}var Ft;!function(t){t[t.list=0]="list",t[t.form=1]="form",t[t.custom=2]="custom",t[t.menu=3]="menu"}(Ft||(Ft={}));class Lt{label;icon;static type=Ft;action=null;type=null;submenu=[];constructor(t,e){this.label=t,this.icon=e}static List(t,e,n){const l=new Lt(t,e);return l.action=()=>Qt.update((()=>n)),l.type=Lt.type.list,l}static Page(t,e,n,l=null){const i=new Lt(t,e);return i.action=()=>n.open(l),i.type=Lt.type.form,i}static Menu(t,e,n){const l=new Lt(t,e);return l.submenu=n,l.type=Lt.type.menu,l}static Custom(t,e,n){const l=new Lt(t,e);return l.action=n,l.type=Lt.type.custom,l}activate(){return"function"==typeof this.action&&this.action(),this}}function Nt(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function At(t){let e;return{c(){e=x("i"),S(e,"class","marker fa-fw fal fa-chevron-left Q3shszd"),F(e,"open",t[5][t[11]])},m(t,n){v(t,e,n)},p(t,n){32&n&&F(e,"open",t[5][t[11]])},d(t){t&&b(e)}}}function Bt(t){let e,n;return e=new Dt({props:{menu:t[9].submenu,wide:t[3],isOpen:!0===t[5][t[11]],isSubmenu:!0}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.menu=t[9].submenu),8&n&&(l.wide=t[3]),32&n&&(l.isOpen=!0===t[5][t[11]]),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function It(t){let e,n,l,i,s,o,c,r,a,u,d,h,p=t[9].label+"",m=t[9].type===Lt.type.menu&&At(t);function g(){return t[7](t[9],t[11])}let y=t[9].type===Lt.type.menu&&Bt(t);return{c(){e=x("button"),n=x("i"),i=k(),s=x("span"),o=w(p),c=k(),m&&m.c(),r=k(),y&&y.c(),a=Q(),S(n,"class",l=f("icon "+t[9].icon)+" Q3shszd"),S(s,"class","Q3shszd"),S(e,"class","closed Q3shszd"),F(e,"has-submenu",t[9].type===Lt.type.menu)},m(t,l){v(t,e,l),$(e,n),$(e,i),$(e,s),$(s,o),$(e,c),m&&m.m(e,null),v(t,r,l),y&&y.m(t,l),v(t,a,l),u=!0,d||(h=_(e,"click",g),d=!0)},p(i,s){t=i,(!u||4&s&&l!==(l=f("icon "+t[9].icon)+" Q3shszd"))&&S(n,"class",l),(!u||4&s)&&p!==(p=t[9].label+"")&&C(o,p),t[9].type===Lt.type.menu?m?m.p(t,s):(m=At(t),m.c(),m.m(e,null)):m&&(m.d(1),m=null),4&s&&F(e,"has-submenu",t[9].type===Lt.type.menu),t[9].type===Lt.type.menu?y?(y.p(t,s),4&s&&nt(y,1)):(y=Bt(t),y.c(),nt(y,1),y.m(a.parentNode,a)):y&&(tt(),lt(y,1,1,(()=>{y=null})),et())},i(t){u||(nt(y),u=!0)},o(t){lt(y),u=!1},d(t){t&&b(e),m&&m.d(),t&&b(r),y&&y.d(t),t&&b(a),d=!1,h()}}}function Pt(t){let e,n,l=t[2],i=[];for(let e=0;e<l.length;e+=1)i[e]=It(Nt(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=x("nav");for(let t=0;t<i.length;t+=1)i[t].c();S(e,"class","Q3shszd"),F(e,"wide",t[3]),F(e,"open",t[0]),F(e,"isSubmenu",t[1])},m(l,s){v(l,e,s);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[8](e),n=!0},p(t,[n]){if(108&n){let o;for(l=t[2],o=0;o<l.length;o+=1){const s=Nt(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=It(s),i[o].c(),nt(i[o],1),i[o].m(e,null))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}8&n&&F(e,"wide",t[3]),1&n&&F(e,"open",t[0]),2&n&&F(e,"isSubmenu",t[1])},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(n){n&&b(e),y(i,n),t[8](null)}}}function qt(t,e,n){let l,{isOpen:i=!0}=e,{isSubmenu:s=!1}=e,{menu:o}=e,{wide:c}=e,r={};function a(t,e){t.type===Lt.type.menu?n(5,r[e]=!r[e],r):t.action()}B((()=>{n(4,l.style.height=l.scrollHeight+"px",l)}));return t.$$set=t=>{"isOpen"in t&&n(0,i=t.isOpen),"isSubmenu"in t&&n(1,s=t.isSubmenu),"menu"in t&&n(2,o=t.menu),"wide"in t&&n(3,c=t.wide)},[i,s,o,c,l,r,a,(t,e)=>a(t,e),function(t){q[t?"unshift":"push"]((()=>{l=t,n(4,l)}))}]}class Dt extends dt{constructor(t){super(),ft(this,t,qt,Pt,o,{isOpen:0,isSubmenu:1,menu:2,wide:3})}}function Ht(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,y=t[1].name+"";return h=new Dt({props:{menu:t[2].menu,wide:t[0]}}),{c(){e=x("main"),n=x("div"),l=x("img"),c=k(),r=x("span"),a=w(y),u=k(),f=x("div"),f.innerHTML='<i class="fas fa-times"></i>',d=k(),rt(h.$$.fragment),l.src!==(s=t[1].avatar??t[2].defaultAvatar)&&S(l,"src",s),S(l,"alt",o=t[1].name),S(l,"class","Q3psonk"),S(r,"class","Q3psonk"),S(f,"class","logout Q3psonk"),S(n,"class","user Q3psonk"),S(e,"class","Q3psonk"),F(e,"wide",t[0])},m(i,s){v(i,e,s),$(e,n),$(n,l),$(n,c),$(n,r),$(r,a),$(n,u),$(n,f),$(e,d),at(h,e,null),p=!0,m||(g=[_(l,"click",t[3]),_(f,"click",Et.logout)],m=!0)},p(t,[n]){(!p||6&n&&l.src!==(s=t[1].avatar??t[2].defaultAvatar))&&S(l,"src",s),(!p||2&n&&o!==(o=t[1].name))&&S(l,"alt",o),(!p||2&n)&&y!==(y=t[1].name+"")&&C(a,y);const i={};4&n&&(i.menu=t[2].menu),1&n&&(i.wide=t[0]),h.$set(i),1&n&&F(e,"wide",t[0])},i(t){p||(nt(h.$$.fragment,t),p=!0)},o(t){lt(h.$$.fragment,t),p=!1},d(t){t&&b(e),ut(h),m=!1,i(g)}}}function Jt(t,e,n){let l,i;c(t,wt,(t=>n(1,l=t))),c(t,kt,(t=>n(2,i=t)));let s=localStorage.getItem("nav-panel-wide");return[s,l,i,function(){n(0,s=!s)?localStorage.setItem("nav-panel-wide","1"):localStorage.removeItem("nav-panel-wide")}]}class Vt extends dt{constructor(t){super(),ft(this,t,Jt,Ht,o,{})}}class Yt{initial=!1;twoWay=!1;fields=[];key=null;label;constructor(t,e=!0,n=!1,l=null){this.label=t,this.twoWay=e,this.initial=n,this.key=l}asc(t){return this.fields.push({field:t,order:1}),this}desc(t){return this.fields.push({field:t,order:-1}),this}get(){let t=[{label:this.label,order:"asc",fields:this.key?this.key+"-asc":this.fields.map((t=>[t.field,1===t.order?"asc":"desc"])),initial:this.initial}];return this.twoWay&&t.push({label:this.label,order:"desc",fields:this.key?this.key+"-desc":this.fields.map((t=>[t.field,1===t.order?"desc":"asc"])),initial:!1}),t}}class Rt{icon;label;onClick;constructor(t,e,n){this.icon=t,this.label=e,this.onClick=n}}class Ut{label;icon;actions;limit;fetcher;card;cardify;static Sorting(t,e=!0,n=!1,l=null){return new Yt(t,e,n,l)}static Action(t,e,n){return new Rt(t,e,n)}sorting=[];initialSortingIndex;constructor(t,e,n,l,i,s,o,c){this.label=t,this.icon=e,this.actions=n,this.limit=l,this.fetcher=s,this.card=o,this.cardify=c,i.forEach((t=>this.sorting.push(...t.get())));let r=this.sorting.findIndex((t=>t.initial));this.initialSortingIndex=r>-1?r:0}}class Wt extends Error{response;constructor(t){super(),this.response=t}}class Kt extends Error{info;constructor(t,e=""){super(t),this.info=e}}class Xt extends Error{response;constructor(t){super(),this.response=t}}class Zt extends Error{response;constructor(t){super(),this.response=t}}function Gt(t){switch(t.status){case 200:return t.json().catch((e=>{throw new Kt("Some error occurred ("+t.status+")",t.url)}));case 401:throw new _t(t);case 403:throw new Wt(t);case 404:throw new Xt(t);case 422:throw new Zt(t);case 499:throw new Kt(t.statusText);default:throw new Kt("Some error occurred ("+t.status+")",t.url)}}class te{api;constructor(t){this.api=t}list(t,e,n,l,i){return fetch(this.api+"/list/"+t,{method:"POST",body:JSON.stringify({sort:e.fields,quickSearch:n,search:l,limit:i})}).then((t=>Gt(t))).then((t=>new ee(t.page,t.count,t.items)))}}class ee{page;count;items;constructor(t,e,n){this.page=t,this.count=e,this.items=n}}class ne{config;initialised=!1;items=[];count=0;page=1;pageCount=1;quickSearch=null;sortingIndex;static create(t,e,n,l,i,s){"string"==typeof i&&(i=new te(i));let o=new Ut(t,e,[],n,l,i,s.component,s.cardify);return new ne(o)}constructor(t){this.config=t,this.sortingIndex=t.initialSortingIndex}addAction(t){null===this.config.actions&&(this.config.actions=[]),this.config.actions.push(t)}reload(){return this.loadData()}loadData(){return this.initialised=!0,this.config.fetcher.list(this.page,this.config.sorting[this.sortingIndex],this.quickSearch,{},this.config.limit).then((t=>{this.count=t.count,this.page=t.page,this.pageCount=Math.ceil(t.count/this.config.limit),this.items.length=0,this.items.push(...t.items.map((t=>this.config.cardify(t))))}))}}function le(t,e,n){const l=t.slice();return l[15]=e[n],l}function ie(t,e,n){const l=t.slice();return l[18]=e[n],l[20]=n,l}function se(t,e,n){const l=t.slice();return l[21]=e[n],l}function oe(t){let e,n=t[0].config.actions,l=[];for(let e=0;e<n.length;e+=1)l[e]=ce(se(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Q()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);v(t,e,n)},p(t,i){if(1&i){let s;for(n=t[0].config.actions,s=0;s<n.length;s+=1){const o=se(t,n,s);l[s]?l[s].p(o,i):(l[s]=ce(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){y(l,t),t&&b(e)}}}function ce(t){let e,n,l,i,s,o;function c(){return t[7](t[21])}return{c(){e=x("button"),n=x("i"),S(n,"class",l=f(t[21].icon)+" Qgu5wy9"),S(e,"title",i=t[21].label),S(e,"class","Qgu5wy9")},m(t,l){v(t,e,l),$(e,n),s||(o=_(e,"click",M(c)),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[21].icon)+" Qgu5wy9")&&S(n,"class",l),1&o&&i!==(i=t[21].label)&&S(e,"title",i)},d(t){t&&b(e),s=!1,o()}}}function re(t){let e,n,l=("asc"===t[18].order?"▼ ":"▲ ")+t[18].label;return{c(){e=x("option"),n=w(l),e.__value=t[20],e.value=e.__value},m(t,l){v(t,e,l),$(e,n)},p(t,e){1&e&&l!==(l=("asc"===t[18].order?"▼ ":"▲ ")+t[18].label)&&C(n,l)},d(t){t&&b(e)}}}function ae(t){let e,n,l;var i=t[0].config.card;function s(t){return{props:{item:t[15],list:t[2]}}}return i&&(e=new i(s(t))),{c(){e&&rt(e.$$.fragment),n=Q()},m(t,i){e&&at(e,t,i),v(t,n,i),l=!0},p(t,l){const o={};if(4&l&&(o.item=t[15]),4&l&&(o.list=t[2]),i!==(i=t[0].config.card)){if(e){tt();const t=e;lt(t.$$.fragment,1,0,(()=>{ut(t,1)})),et()}i?(e=new i(s(t)),rt(e.$$.fragment),nt(e.$$.fragment,1),at(e,n.parentNode,n)):e=null}else i&&e.$set(o)},i(t){l||(e&&nt(e.$$.fragment,t),l=!0)},o(t){e&&lt(e.$$.fragment,t),l=!1},d(t){t&&b(n),e&&ut(e,t)}}}function ue(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,Q,E,M,z,j,L,N,A,B,I,P,q,D,H,J,V,Y,U,W,K=t[0].config.label+"",X=t[2].count+"",Z=t[2].pageCount+"",G=t[0].config.actions&&oe(t),it=t[0].config.sorting,st=[];for(let e=0;e<it.length;e+=1)st[e]=re(ie(t,it,e));let ot=t[2].items,ct=[];for(let e=0;e<ot.length;e+=1)ct[e]=ae(le(t,ot,e));const rt=t=>lt(ct[t],1,1,(()=>{ct[t]=null}));return{c(){e=x("main"),n=x("header"),l=x("section"),s=x("i"),c=k(),r=x("span"),a=x("div"),u=w(K),f=k(),d=x("div"),h=w(X),p=k(),m=x("div"),G&&G.c(),g=k(),Q=x("section"),E=x("input"),M=k(),z=x("section"),j=x("button"),j.innerHTML='<i class="fas fa-chevron-left"></i>',L=k(),N=x("input"),A=k(),B=x("span"),I=w(Z),P=k(),q=x("button"),q.innerHTML='<i class="fas fa-chevron-right"></i>',D=k(),H=x("select");for(let t=0;t<st.length;t+=1)st[t].c();J=k(),V=x("section");for(let t=0;t<ct.length;t+=1)ct[t].c();S(s,"class",o="icon "+t[0].config.icon+" Qgu5wy9"),S(a,"class","label Qgu5wy9"),S(d,"class","count Qgu5wy9"),S(r,"class","title"),S(m,"class","buttons Qgu5wy9"),S(l,"class","info Qgu5wy9"),S(E,"type","text"),S(E,"placeholder","search"),S(E,"class","Qgu5wy9"),S(Q,"class","tools search Qgu5wy9"),S(j,"class","Qgu5wy9"),S(N,"type","text"),S(N,"class","Qgu5wy9"),S(B,"class","of Qgu5wy9"),S(q,"class","Qgu5wy9"),S(H,"class","Qgu5wy9"),void 0===t[0].sortingIndex&&R((()=>t[12].call(H))),S(z,"class","tools paging Qgu5wy9"),S(n,"class","Qgu5wy9"),S(V,"class","listing Qgu5wy9"),S(e,"class","Qgu5wy9"),F(e,"selected",t[1])},m(i,o){v(i,e,o),$(e,n),$(n,l),$(l,s),$(l,c),$(l,r),$(r,a),$(a,u),$(r,f),$(r,d),$(d,h),$(l,p),$(l,m),G&&G.m(m,null),$(n,g),$(n,Q),$(Q,E),O(E,t[0].quickSearch),$(n,M),$(n,z),$(z,j),$(z,L),$(z,N),O(N,t[2].page),$(z,A),$(z,B),$(B,I),$(z,P),$(z,q),$(z,D),$(z,H);for(let t=0;t<st.length;t+=1)st[t].m(H,null);T(H,t[0].sortingIndex),$(e,J),$(e,V);for(let t=0;t<ct.length;t+=1)ct[t].m(V,null);Y=!0,U||(W=[_(E,"input",t[8]),_(E,"input",t[4]),_(j,"click",t[9]),_(N,"input",t[10]),_(N,"input",t[5]),_(q,"click",t[11]),_(H,"change",t[12]),_(H,"input",t[6])],U=!0)},p(t,[n]){if((!Y||1&n&&o!==(o="icon "+t[0].config.icon+" Qgu5wy9"))&&S(s,"class",o),(!Y||1&n)&&K!==(K=t[0].config.label+"")&&C(u,K),(!Y||4&n)&&X!==(X=t[2].count+"")&&C(h,X),t[0].config.actions?G?G.p(t,n):(G=oe(t),G.c(),G.m(m,null)):G&&(G.d(1),G=null),1&n&&E.value!==t[0].quickSearch&&O(E,t[0].quickSearch),4&n&&N.value!==t[2].page&&O(N,t[2].page),(!Y||4&n)&&Z!==(Z=t[2].pageCount+"")&&C(I,Z),1&n){let e;for(it=t[0].config.sorting,e=0;e<it.length;e+=1){const l=ie(t,it,e);st[e]?st[e].p(l,n):(st[e]=re(l),st[e].c(),st[e].m(H,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=it.length}if(1&n&&T(H,t[0].sortingIndex),5&n){let e;for(ot=t[2].items,e=0;e<ot.length;e+=1){const l=le(t,ot,e);ct[e]?(ct[e].p(l,n),nt(ct[e],1)):(ct[e]=ae(l),ct[e].c(),nt(ct[e],1),ct[e].m(V,null))}for(tt(),e=ot.length;e<ct.length;e+=1)rt(e);et()}2&n&&F(e,"selected",t[1])},i(t){if(!Y){for(let t=0;t<ot.length;t+=1)nt(ct[t]);Y=!0}},o(t){ct=ct.filter(Boolean);for(let t=0;t<ct.length;t+=1)lt(ct[t]);Y=!1},d(t){t&&b(e),G&&G.d(),y(st,t),y(ct,t),U=!1,i(W)}}}function fe(t,e,n){let l,{selected:i=!1}=e,{list:s}=e;const o=bt(s);let r,a;function u(){""!==l.page&&(d(o,l.page=isNaN(l.page)?1:l.page,l),l.page<1&&d(o,l.page=1,l),clearTimeout(a),a=setTimeout(f,250))}function f(){return s.loadData().then((()=>d(o,l=s,l)))}c(t,o,(t=>n(2,l=t))),s.reload=()=>f();return t.$$set=t=>{"selected"in t&&n(1,i=t.selected),"list"in t&&n(0,s=t.list)},t.$$.update=()=>{3&t.$$.dirty&&i&&!s.initialised&&f()},[s,i,l,o,function(){clearTimeout(r),r=setTimeout(f,250)},u,f,t=>t.onClick(s),function(){s.quickSearch=this.value,n(0,s)},()=>{d(o,l.page--,l),u()},function(){l.page=this.value,o.set(l)},()=>{d(o,l.page++,l),u()},function(){s.sortingIndex=j(this),n(0,s)}]}class de extends dt{constructor(t){super(),ft(this,t,fe,ue,o,{selected:1,list:0})}}let he=new class{active;_documents=[];documents;constructor(){this.active=bt(null),this._documents=[],this.documents=bt(this._documents)}has(t){return this.docIndex(t)>-1}docIndex(t){return this._documents.findIndex((e=>e.$id===t))}add(t){this._documents.push(t),this.documents.set(this._documents)}show(t){this.active.set(this._documents[this.docIndex(t)])}close(t){let e=this.docIndex(t);this._documents.length>1&&(e===this._documents.length-1?this.show(this._documents[e-1].$id):this.show(this._documents[e+1].$id)),this._documents.splice(e,1),this.documents.set(this._documents)}},pe=he.documents;he.active;class me{get class(){return Object.getPrototypeOf(this).constructor}static component;static $idPrefix;static $id(t=null){return this.$idPrefix+"--"+t??""}static open(t=null){let e=this.$id(t);he.has(e)||he.add(new this(t)),he.show(e)}static create(...t){}static icon;get icon(){return this.class.icon}_id;get label(){return"LABEL"}get info(){return"INFO"}constructor(t){this._id=t}get component(){return Object.getPrototypeOf(this).constructor.component}get $id(){return Object.getPrototypeOf(this).constructor.$id(this.id)}get id(){return this._id}set id(t){if(t!==this._id){if(he.has(this.class.$id(t)))throw new Kt("Can not change document id","Duplicate document id: "+this.class.$id(t));this._id=t,pe.update((t=>t))}}close(){he.close(this.$id)}}function ge(t){let e,n,l;var i=t[0].component;function s(t){return{props:{doc:t[0]}}}return i&&(n=new i(s(t))),{c(){e=x("main"),n&&rt(n.$$.fragment),S(e,"class","Qh6p0ix"),F(e,"selected",t[1])},m(t,i){v(t,e,i),n&&at(n,e,null),l=!0},p(t,[l]){const o={};if(1&l&&(o.doc=t[0]),i!==(i=t[0].component)){if(n){tt();const t=n;lt(t.$$.fragment,1,0,(()=>{ut(t,1)})),et()}i?(n=new i(s(t)),rt(n.$$.fragment),nt(n.$$.fragment,1),at(n,e,null)):n=null}else i&&n.$set(o);2&l&&F(e,"selected",t[1])},i(t){l||(n&&nt(n.$$.fragment,t),l=!0)},o(t){n&&lt(n.$$.fragment,t),l=!1},d(t){t&&b(e),n&&ut(n)}}}function $e(t,e,n){let{doc:l}=e,{selected:i}=e;return t.$$set=t=>{"doc"in t&&n(0,l=t.doc),"selected"in t&&n(1,i=t.selected)},[l,i]}me.create=function(t,e){return Object.assign(class extends me{},{component:t,$idPrefix:e})};class ve extends dt{constructor(t){super(),ft(this,t,$e,ge,o,{doc:0,selected:1})}}function be(t){let e,n;const l=t[1].default,i=r(l,t,t[0],null);return{c(){e=x("main"),i&&i.c(),S(e,"class","Q5gptos")},m(t,l){v(t,e,l),i&&i.m(e,null),n=!0},p(t,[e]){i&&i.p&&(!n||1&e)&&u(i,l,t,t[0],n?e:-1,null,null)},i(t){n||(nt(i,t),n=!0)},o(t){lt(i,t),n=!1},d(t){t&&b(e),i&&i.d(t)}}}function ye(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,l]}class xe extends dt{constructor(t){super(),ft(this,t,ye,be,o,{})}}function we(e){let n,l,s,o,c,r,a,u,d,h,p,m,g,y,Q=e[1].info+"",E=e[1].label+"";return{c(){n=x("main"),l=x("i"),o=k(),c=x("span"),r=w(Q),a=k(),u=x("i"),d=k(),h=x("span"),p=w(E),S(l,"class",s=f(e[1].icon)+" Q2qpot6"),S(c,"class","info Q2qpot6"),S(u,"class","close fas fa-times Q2qpot6"),S(h,"class","label Q2qpot6"),S(n,"title",m=e[1].label),S(n,"class","Q2qpot6"),F(n,"selected",e[0])},m(t,i){v(t,n,i),$(n,l),$(n,o),$(n,c),$(c,r),$(n,a),$(n,u),$(n,d),$(n,h),$(h,p),g||(y=[_(u,"click",e[4]),_(n,"click",e[3])],g=!0)},p(t,[e]){2&e&&s!==(s=f(t[1].icon)+" Q2qpot6")&&S(l,"class",s),2&e&&Q!==(Q=t[1].info+"")&&C(r,Q),2&e&&E!==(E=t[1].label+"")&&C(p,E),2&e&&m!==(m=t[1].label)&&S(n,"title",m),1&e&&F(n,"selected",t[0])},i:t,o:t,d(t){t&&b(n),g=!1,i(y)}}}function ke(t,e,n){let{selected:l}=e,{doc:i}=e;function s(t){l&&t.close()}return t.$$set=t=>{"selected"in t&&n(0,l=t.selected),"doc"in t&&n(1,i=t.doc)},[l,i,s,function(e){I.call(this,t,e)},()=>s(i)]}class Qe extends dt{constructor(t){super(),ft(this,t,ke,we,o,{selected:0,doc:1})}}let _e={manager:he,Doc:me,create:me.create.bind(me)};function Ee(t,e,n){const l=t.slice();return l[7]=e[n],l}function Me(t,e,n){const l=t.slice();return l[10]=e[n],l}function Se(t,e,n){const l=t.slice();return l[7]=e[n],l}function Ce(t){let e,n;return e=new Qe({props:{doc:t[7],selected:t[7]===t[1]}}),e.$on("click",(function(){return t[6](t[7])})),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(n,l){t=n;const i={};1&l&&(i.doc=t[7]),3&l&&(i.selected=t[7]===t[1]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Oe(t){let e,n,l=t[0],i=[];for(let e=0;e<l.length;e+=1)i[e]=Ce(Se(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Q()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);v(t,e,l),n=!0},p(t,n){if(3&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const s=Se(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=Ce(s),i[o].c(),nt(i[o],1),i[o].m(e.parentNode,e))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(t){y(i,t),t&&b(e)}}}function ze(t){let e,n;return e=new de({props:{list:t[10],selected:t[10]===t[3]}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.list=t[10]),12&n&&(l.selected=t[10]===t[3]),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Te(t){let e,n;return e=new ve({props:{doc:t[7],selected:t[7]===t[1]}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.doc=t[7]),3&n&&(l.selected=t[7]===t[1]),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function je(t){let e,n,l,i,s,o,c;n=new Vt({}),i=new xe({props:{$$slots:{default:[Oe]},$$scope:{ctx:t}}});let r=t[2].lists,a=[];for(let e=0;e<r.length;e+=1)a[e]=ze(Me(t,r,e));const u=t=>lt(a[t],1,1,(()=>{a[t]=null}));let f=t[0],d=[];for(let e=0;e<f.length;e+=1)d[e]=Te(Ee(t,f,e));const h=t=>lt(d[t],1,1,(()=>{d[t]=null}));return{c(){e=x("main"),rt(n.$$.fragment),l=k(),rt(i.$$.fragment),s=k();for(let t=0;t<a.length;t+=1)a[t].c();o=k();for(let t=0;t<d.length;t+=1)d[t].c();S(e,"class","Q1v2avhj")},m(t,r){v(t,e,r),at(n,e,null),$(e,l),at(i,e,null),$(e,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);$(e,o);for(let t=0;t<d.length;t+=1)d[t].m(e,null);c=!0},p(t,[n]){const l={};if(32771&n&&(l.$$scope={dirty:n,ctx:t}),i.$set(l),12&n){let l;for(r=t[2].lists,l=0;l<r.length;l+=1){const i=Me(t,r,l);a[l]?(a[l].p(i,n),nt(a[l],1)):(a[l]=ze(i),a[l].c(),nt(a[l],1),a[l].m(e,o))}for(tt(),l=r.length;l<a.length;l+=1)u(l);et()}if(3&n){let l;for(f=t[0],l=0;l<f.length;l+=1){const i=Ee(t,f,l);d[l]?(d[l].p(i,n),nt(d[l],1)):(d[l]=Te(i),d[l].c(),nt(d[l],1),d[l].m(e,null))}for(tt(),l=f.length;l<d.length;l+=1)h(l);et()}},i(t){if(!c){nt(n.$$.fragment,t),nt(i.$$.fragment,t);for(let t=0;t<r.length;t+=1)nt(a[t]);for(let t=0;t<f.length;t+=1)nt(d[t]);c=!0}},o(t){lt(n.$$.fragment,t),lt(i.$$.fragment,t),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)lt(a[t]);d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)lt(d[t]);c=!1},d(t){t&&b(e),ut(n),ut(i),y(a,t),y(d,t)}}}function Fe(t,e,n){let l,i,s,o;c(t,kt,(t=>n(2,s=t))),c(t,Qt,(t=>n(3,o=t)));let r=_e.manager.active;c(t,r,(t=>n(1,i=t)));let a=_e.manager.documents;c(t,a,(t=>n(0,l=t)));return[l,i,s,o,r,a,t=>d(r,i=t,i)]}class Le extends dt{constructor(t){super(),ft(this,t,Fe,je,o,{})}}function Ne(t,e,n){const l=t.slice();return l[1]=e[n],l}function Ae(t){let e,n,l,i,s,o,c,r,a,u,d,h=t[1].label+"",p=t[1].info+"";return{c(){e=x("section"),n=x("i"),i=k(),s=x("div"),o=w(h),c=k(),r=x("div"),a=w(p),u=k(),S(n,"class",l=f("fa "+t[1].icon)+" Q1mwykiy"),S(r,"class","info Q1mwykiy"),S(s,"class","label Q1mwykiy"),S(e,"class",d=f(t[1].type)+" Q1mwykiy"),F(e,"hide",t[1].hide)},m(t,l){v(t,e,l),$(e,n),$(e,i),$(e,s),$(s,o),$(s,c),$(s,r),$(r,a),$(e,u)},p(t,i){1&i&&l!==(l=f("fa "+t[1].icon)+" Q1mwykiy")&&S(n,"class",l),1&i&&h!==(h=t[1].label+"")&&C(o,h),1&i&&p!==(p=t[1].info+"")&&C(a,p),1&i&&d!==(d=f(t[1].type)+" Q1mwykiy")&&S(e,"class",d),1&i&&F(e,"hide",t[1].hide)},d(t){t&&b(e)}}}function Be(e){let n,l,i,s=e[0],o=[];for(let t=0;t<s.length;t+=1)o[t]=Ae(Ne(e,s,t));return{c(){n=x("main");for(let t=0;t<o.length;t+=1)o[t].c();S(n,"class","Q1mwykiy")},m(t,e){v(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);l||(i=h(ht.call(null,n,"body")),l=!0)},p(t,[e]){if(1&e){let l;for(s=t[0],l=0;l<s.length;l+=1){const i=Ne(t,s,l);o[l]?o[l].p(i,e):(o[l]=Ae(i),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},i:t,o:t,d(t){t&&b(n),y(o,t),l=!1,i()}}}function Ie(t,e,n){let l;return c(t,yt,(t=>n(0,l=t))),[l]}class Pe extends dt{constructor(t){super(),ft(this,t,Ie,Be,o,{})}}let qe=bt([]);const De=new class{show(t,e={}){qe.update((n=>[...n,new He(t,e)]))}close(t){qe.update((e=>{let n=e.indexOf(t);return n>-1&&e.splice(n,1),e}))}};class He{Component;properties;constructor(t,e){this.Component=t,this.properties=e}close(){return()=>De.close(this)}}function Je(t,e,n){const l=t.slice();return l[1]=e[n],l}function Ve(t){let n,l;const i=[t[1].properties,{close:t[1].close()}];let s={};for(let t=0;t<i.length;t+=1)s=e(s,i[t]);return n=new t[1].Component({props:s}),{c(){rt(n.$$.fragment)},m(t,e){at(n,t,e),l=!0},p(t,e){const l=1&e?st(i,[ot(t[1].properties),{close:t[1].close()}]):{};n.$set(l)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){lt(n.$$.fragment,t),l=!1},d(t){ut(n,t)}}}function Ye(t){let e,n,l=t[0],i=[];for(let e=0;e<l.length;e+=1)i[e]=Ve(Je(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Q()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);v(t,e,l),n=!0},p(t,[n]){if(1&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const s=Je(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=Ve(s),i[o].c(),nt(i[o],1),i[o].m(e.parentNode,e))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(t){y(i,t),t&&b(e)}}}function Re(t,e,n){let l;return c(t,qe,(t=>n(0,l=t))),[l]}class Ue extends dt{constructor(t){super(),ft(this,t,Re,Ye,o,{})}}function We(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Ke(t){let e,n,l,i;const s=[Ze,Xe],o=[];function c(t,e){return null===t[0]?0:1}return e=c(t),n=o[e]=s[e](t),{c(){n.c(),l=Q()},m(t,n){o[e].m(t,n),v(t,l,n),i=!0},p(t,i){let r=e;e=c(t),e!==r&&(tt(),lt(o[r],1,1,(()=>{o[r]=null})),et(),n=o[e],n||(n=o[e]=s[e](t),n.c()),nt(n,1),n.m(l.parentNode,l))},i(t){i||(nt(n),i=!0)},o(t){lt(n),i=!1},d(t){o[e].d(t),t&&b(l)}}}function Xe(t){let e,n;return e=new Le({}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Ze(t){let e,n;return e=new jt({}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Ge(t){let e,n;return e=new $t({props:{icon:"fad fa-spinner fa-spin",$$slots:{default:[tn]},$$scope:{ctx:t}}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};8&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function tn(t){let e;return{c(){e=w("Initializing magic...")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function en(t){let e,n,l,i,s,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Ge,then:Ke,catch:We,value:2,blocks:[,,,]};return it(t[1],o),n=new Pe({}),i=new Ue({}),{c(){o.block.c(),e=k(),rt(n.$$.fragment),l=k(),rt(i.$$.fragment)},m(t,c){o.block.m(t,o.anchor=c),o.mount=()=>e.parentNode,o.anchor=e,v(t,e,c),at(n,t,c),v(t,l,c),at(i,t,c),s=!0},p(e,[n]){!function(t,e,n){const l=e.slice(),{resolved:i}=t;t.current===t.then&&(l[t.value]=i),t.current===t.catch&&(l[t.error]=i),t.block.p(l,n)}(o,t=e,n)},i(t){s||(nt(o.block),nt(n.$$.fragment,t),nt(i.$$.fragment,t),s=!0)},o(t){for(let t=0;t<3;t+=1){lt(o.blocks[t])}lt(n.$$.fragment,t),lt(i.$$.fragment,t),s=!1},d(t){o.block.d(t),o.token=null,o=null,t&&b(e),ut(n,t),t&&b(l),ut(i,t)}}}function nn(t,e,n){let l;c(t,wt,(t=>n(0,l=t))),class{static _registered=!1;static register(){this._registered||(window.addEventListener("unhandledrejection",(t=>this.handle(t.reason))),window.addEventListener("error",(t=>this.handle(t.error))),this._registered=!0)}static handle(t){t instanceof _t?(xt.error("Not authenticated","You must log in to continue"),fetch("/api/auth/logout").then((()=>wt.set(null)))):t instanceof Wt?xt.error("You dont have permission for the requested resource!",t.message):t instanceof Kt?xt.error(t.message,t.info):t instanceof Xt?xt.error("The requested resource can not be found!"):t instanceof Zt?xt.error("Validation Error!"):xt.error("Some unknown error occurred: ",t.message)}}.register();let i=Et.isAuthenticated();return[l,i]}class ln extends dt{constructor(t){super(),ft(this,t,nn,en,o,{})}}function sn(t,e,n){const l=t.slice();return l[3]=e[n],l}function on(t,e,n){const l=t.slice();return l[6]=e[n],l}function cn(t,e,n){const l=t.slice();return l[9]=e[n],l}function rn(t){let e,n,l;return{c(){e=x("img"),S(e,"alt",n=t[0].label),e.src!==(l=t[0].img)&&S(e,"src",l),S(e,"loading","lazy"),S(e,"class","Q11w6ue4")},m(t,n){v(t,e,n)},p(t,i){1&i&&n!==(n=t[0].label)&&S(e,"alt",n),1&i&&e.src!==(l=t[0].img)&&S(e,"src",l)},d(t){t&&b(e)}}}function an(t){let e,n,l,i;return{c(){e=x("span"),n=x("img"),S(n,"alt",l=t[0].label),n.src!==(i=t[0].avatar)&&S(n,"src",i),S(n,"loading","lazy"),S(n,"class","Q11w6ue4"),S(e,"class","avatar Q11w6ue4")},m(t,l){v(t,e,l),$(e,n)},p(t,e){1&e&&l!==(l=t[0].label)&&S(n,"alt",l),1&e&&n.src!==(i=t[0].avatar)&&S(n,"src",i)},d(t){t&&b(e)}}}function un(t){let e,n=t[0].icons,l=[];for(let e=0;e<n.length;e+=1)l[e]=fn(cn(t,n,e));return{c(){e=x("span");for(let t=0;t<l.length;t+=1)l[t].c();S(e,"class","icons Q11w6ue4")},m(t,n){v(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(1&i){let s;for(n=t[0].icons,s=0;s<n.length;s+=1){const o=cn(t,n,s);l[s]?l[s].p(o,i):(l[s]=fn(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&b(e),y(l,t)}}}function fn(t){let e,n,l,i,s,o,c;return{c(){e=x("span"),n=x("i"),l=k(),i=x("i"),o=k(),S(n,"class","fas fa-circle fa-stack-2x"),z(n,"color","#000c"),S(i,"class",s=t[9].icon+" fa-stack-1x fa-inverse Q11w6ue4"),z(i,"color",t[9].color?t[9].color:"#fffd"),S(e,"class","fa-stack fa-2x"),z(e,"font-size","10px"),S(e,"title",c=t[9].hint)},m(t,s){v(t,e,s),$(e,n),$(e,l),$(e,i),$(e,o)},p(t,n){1&n&&s!==(s=t[9].icon+" fa-stack-1x fa-inverse Q11w6ue4")&&S(i,"class",s),1&n&&z(i,"color",t[9].color?t[9].color:"#fffd"),1&n&&c!==(c=t[9].hint)&&S(e,"title",c)},d(t){t&&b(e)}}}function dn(t){let e,n=t[0].properties,l=[];for(let e=0;e<n.length;e+=1)l[e]=hn(on(t,n,e));return{c(){e=x("span");for(let t=0;t<l.length;t+=1)l[t].c();S(e,"class","props Q11w6ue4")},m(t,n){v(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(1&i){let s;for(n=t[0].properties,s=0;s<n.length;s+=1){const o=on(t,n,s);l[s]?l[s].p(o,i):(l[s]=hn(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&b(e),y(l,t)}}}function hn(t){let e,n,l,i,s,o=t[6].label+"",c=t[6].value+"";return{c(){e=x("span"),n=w(o),l=k(),i=x("span"),s=w(c),S(e,"class","label Q11w6ue4"),S(i,"class","value Q11w6ue4")},m(t,o){v(t,e,o),$(e,n),v(t,l,o),v(t,i,o),$(i,s)},p(t,e){1&e&&o!==(o=t[6].label+"")&&C(n,o),1&e&&c!==(c=t[6].value+"")&&C(s,c)},d(t){t&&b(e),t&&b(l),t&&b(i)}}}function pn(t){let e,n=t[0].actions,l=[];for(let e=0;e<n.length;e+=1)l[e]=mn(sn(t,n,e));return{c(){e=x("footer");for(let t=0;t<l.length;t+=1)l[t].c();S(e,"class","Q11w6ue4")},m(t,n){v(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,i){if(3&i){let s;for(n=t[0].actions,s=0;s<n.length;s+=1){const o=sn(t,n,s);l[s]?l[s].p(o,i):(l[s]=mn(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&b(e),y(l,t)}}}function mn(t){let e,n,l,i,s,o;function c(){return t[2](t[3])}return{c(){e=x("button"),n=x("i"),S(n,"class",l=f(t[3].icon)+" Q11w6ue4"),S(e,"title",i=t[3].label),S(e,"class","Q11w6ue4")},m(t,l){v(t,e,l),$(e,n),s||(o=_(e,"click",M(c)),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[3].icon)+" Q11w6ue4")&&S(n,"class",l),1&o&&i!==(i=t[3].label)&&S(e,"title",i)},d(t){t&&b(e),s=!1,o()}}}function gn(e){let n,l,i,o,c,r,a,u,f,d,h,p,m,g,y,Q=e[0].label+"",E=e[0].id+"",M=e[0].img&&rn(e),O=e[0].avatar&&an(e),z=e[0].icons&&un(e),T=e[0].properties&&dn(e),j=e[0].actions&&pn(e);return{c(){n=x("main"),M&&M.c(),l=k(),i=x("header"),O&&O.c(),o=k(),c=x("span"),r=x("span"),a=w(Q),u=k(),f=x("span"),d=w(E),h=k(),z&&z.c(),p=k(),T&&T.c(),m=k(),j&&j.c(),S(r,"class","label ellipsis Q11w6ue4"),S(f,"class","id Q11w6ue4"),S(c,"class","info Q11w6ue4"),S(i,"class","Q11w6ue4"),S(n,"class","Q11w6ue4"),F(n,"inactive",!e[0].active)},m(t,b){v(t,n,b),M&&M.m(n,null),$(n,l),$(n,i),O&&O.m(i,null),$(i,o),$(i,c),$(c,r),$(r,a),$(c,u),$(c,f),$(f,d),$(i,h),z&&z.m(i,null),$(n,p),T&&T.m(n,null),$(n,m),j&&j.m(n,null),g||(y=_(n,"click",(function(){s(e[0].action)&&e[0].action.apply(this,arguments)})),g=!0)},p(t,[s]){(e=t)[0].img?M?M.p(e,s):(M=rn(e),M.c(),M.m(n,l)):M&&(M.d(1),M=null),e[0].avatar?O?O.p(e,s):(O=an(e),O.c(),O.m(i,o)):O&&(O.d(1),O=null),1&s&&Q!==(Q=e[0].label+"")&&C(a,Q),1&s&&E!==(E=e[0].id+"")&&C(d,E),e[0].icons?z?z.p(e,s):(z=un(e),z.c(),z.m(i,null)):z&&(z.d(1),z=null),e[0].properties?T?T.p(e,s):(T=dn(e),T.c(),T.m(n,m)):T&&(T.d(1),T=null),e[0].actions?j?j.p(e,s):(j=pn(e),j.c(),j.m(n,null)):j&&(j.d(1),j=null),1&s&&F(n,"inactive",!e[0].active)},i:t,o:t,d(t){t&&b(n),M&&M.d(),O&&O.d(),z&&z.d(),T&&T.d(),j&&j.d(),g=!1,y()}}}function $n(t,e,n){let{item:l}=e,{list:i}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item),"list"in t&&n(1,i=t.list)},[l,i,t=>t.onClick(i)]}class vn extends dt{constructor(t){super(),ft(this,t,$n,gn,o,{item:0,list:1})}}class bn{icon;color;hint;constructor(t,e,n=null,l=null){this.icon=e,this.color=n,this.hint=l,this.icon=t+" "+e}}class yn{label;value;constructor(t,e){this.label=t,this.value=e}}class xn{icon;label;onClick;constructor(t,e,n){this.icon=t,this.label=e,this.onClick=n}}class wn{id;action;label;active;img;avatar;icons;properties;actions;constructor(t,e,n,l=!0,i=null,s=null,o=null,c=null,r=null){this.id=t,this.action=e,this.label=n,this.active=l,this.img=i,this.avatar=s,this.icons=o,this.properties=c,this.actions=r}}class kn{static Component=vn;static Cardify(t,e,n,l=!0,i=null,s=null,o=null,c=null,r=[]){return new wn(t,e,n,l,i,s,o,c,r)}static Icon(t,e,n=null,l=null){return new bn(t,e,n,l)}static Property(t,e){return new yn(t,e)}static Action(t,e,n){return new xn(t,e,n)}}function Qn(t){let e,n,l,i,s;const o=t[3].default,c=r(o,t,t[2],null);return{c(){e=x("section"),n=x("header"),l=w(t[0]),i=k(),c&&c.c(),S(n,"class","Qlsdj8n"),S(e,"class","Qlsdj8n"),F(e,"wide",t[1])},m(t,o){v(t,e,o),$(e,n),$(n,l),$(e,i),c&&c.m(e,null),s=!0},p(t,[n]){(!s||1&n)&&C(l,t[0]),c&&c.p&&(!s||4&n)&&u(c,o,t,t[2],s?n:-1,null,null),2&n&&F(e,"wide",t[1])},i(t){s||(nt(c,t),s=!0)},o(t){lt(c,t),s=!1},d(t){t&&b(e),c&&c.d(t)}}}function _n(t,e,n){let{$$slots:l={},$$scope:i}=e,{label:s}=e,{wide:o}=e;return t.$$set=t=>{"label"in t&&n(0,s=t.label),"wide"in t&&n(1,o=t.wide),"$$scope"in t&&n(2,i=t.$$scope)},[s,o,i,l]}class En extends dt{constructor(t){super(),ft(this,t,_n,Qn,o,{label:0,wide:1})}}function Mn(t){let e;return{c(){e=x("i"),S(e,"class","hint-marker fad fa-info-circle Qzqtrvy")},m(t,n){v(t,e,n)},d(t){t&&b(e)}}}function Sn(t){let e;return{c(){e=x("div"),S(e,"class","hint Qzqtrvy")},m(n,l){v(n,e,l),e.innerHTML=t[2]},p(t,n){4&n&&(e.innerHTML=t[2])},d(t){t&&b(e)}}}function Cn(t){let e,n,l,i,s,o,c,a,f=t[2]&&Mn();const d=t[4].default,h=r(d,t,t[3],null);let p=t[2]&&Sn(t);return{c(){e=x("section"),n=x("span"),f&&f.c(),l=k(),i=w(t[0]),s=k(),h&&h.c(),o=k(),p&&p.c(),c=Q(),S(n,"class","label Qzqtrvy"),S(e,"class","Qzqtrvy"),F(e,"vertical",!t[1])},m(t,r){v(t,e,r),$(e,n),f&&f.m(n,null),$(n,l),$(n,i),$(e,s),h&&h.m(e,null),v(t,o,r),p&&p.m(t,r),v(t,c,r),a=!0},p(t,[s]){t[2]?f||(f=Mn(),f.c(),f.m(n,l)):f&&(f.d(1),f=null),(!a||1&s)&&C(i,t[0]),h&&h.p&&(!a||8&s)&&u(h,d,t,t[3],a?s:-1,null,null),2&s&&F(e,"vertical",!t[1]),t[2]?p?p.p(t,s):(p=Sn(t),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null)},i(t){a||(nt(h,t),a=!0)},o(t){lt(h,t),a=!1},d(t){t&&b(e),f&&f.d(),h&&h.d(t),t&&b(o),p&&p.d(t),t&&b(c)}}}function On(t,e,n){let{$$slots:l={},$$scope:i}=e,{label:s}=e,{inlineLabel:o}=e,{hint:c}=e;return t.$$set=t=>{"label"in t&&n(0,s=t.label),"inlineLabel"in t&&n(1,o=t.inlineLabel),"hint"in t&&n(2,c=t.hint),"$$scope"in t&&n(3,i=t.$$scope)},[s,o,c,i,l]}class zn extends dt{constructor(t){super(),ft(this,t,On,Cn,o,{label:0,inlineLabel:1,hint:2})}}function Tn(e){let n,l,i,s,o,c,r,a,u,f;return{c(){n=x("div"),l=x("i"),i=k(),s=x("b"),o=w(e[0]),c=w(" ("),r=w(e[1]),a=w(" / "),u=w(e[2]),f=w(")"),S(l,"class","fas fa-exclamation-circle Qfzgwv6"),S(n,"class","Qfzgwv6")},m(t,e){v(t,n,e),$(n,l),$(n,i),$(n,s),$(s,o),$(n,c),$(n,r),$(n,a),$(n,u),$(n,f)},p(t,[e]){1&e&&C(o,t[0]),2&e&&C(r,t[1]),4&e&&C(u,t[2])},i:t,o:t,d(t){t&&b(n)}}}function jn(t,e,n){let{message:l}=e,{field:i}=e,{label:s}=e;return t.$$set=t=>{"message"in t&&n(0,l=t.message),"field"in t&&n(1,i=t.field),"label"in t&&n(2,s=t.label)},[l,i,s]}class Fn extends dt{constructor(t){super(),ft(this,t,jn,Tn,o,{message:0,field:1,label:2})}}function Ln(t,e,n){const l=t.slice();return l[7]=e[n],l}function Nn(t,e,n){const l=t.slice();return l[10]=e[n],l[11]=e,l[12]=n,l}function An(t,e,n){const l=t.slice();return l[13]=e[n],l}function Bn(t,e,n){const l=t.slice();return l[16]=e[n],l}function In(t){let e,n,l,i,s,o;function c(){return t[5](t[16])}return{c(){e=x("button"),n=x("i"),S(n,"class",l=f(t[16].icon)+" Q8nwlse"),e.disabled=i=!t[16].active(t[0]),S(e,"class","Q8nwlse")},m(t,l){v(t,e,l),$(e,n),s||(o=_(e,"click",c),s=!0)},p(s,o){t=s,1&o&&l!==(l=f(t[16].icon)+" Q8nwlse")&&S(n,"class",l),1&o&&i!==(i=!t[16].active(t[0]))&&(e.disabled=i)},d(t){t&&b(e),s=!1,o()}}}function Pn(t){let n,l,i,s;const o=[{name:t[10].field},t[10].props];function c(e){t[6](e,t[10])}var r=t[10].component;function a(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return void 0!==t[1][t[10].field]&&(n.value=t[1][t[10].field]),{props:n}}return r&&(n=new r(a(t)),q.push((()=>ct(n,"value",c)))),{c(){n&&rt(n.$$.fragment),i=Q()},m(t,e){n&&at(n,t,e),v(t,i,e),s=!0},p(e,s){t=e;const u=1&s?st(o,[{name:t[10].field},ot(t[10].props)]):{};var f;if(!l&&3&s&&(l=!0,u.value=t[1][t[10].field],f=()=>l=!1,H.push(f)),r!==(r=t[10].component)){if(n){tt();const t=n;lt(t.$$.fragment,1,0,(()=>{ut(t,1)})),et()}r?(n=new r(a(t)),q.push((()=>ct(n,"value",c))),rt(n.$$.fragment),nt(n.$$.fragment,1),at(n,i.parentNode,i)):n=null}else r&&n.$set(u)},i(t){s||(n&&nt(n.$$.fragment,t),s=!0)},o(t){n&&lt(n.$$.fragment,t),s=!1},d(t){t&&b(i),n&&ut(n,t)}}}function qn(t){let e,n,l=t[2][t[10].field],i=[];for(let e=0;e<l.length;e+=1)i[e]=Dn(An(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Q()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);v(t,e,l),n=!0},p(t,n){if(5&n){let o;for(l=t[2][t[10].field],o=0;o<l.length;o+=1){const s=An(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=Dn(s),i[o].c(),nt(i[o],1),i[o].m(e.parentNode,e))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(t){y(i,t),t&&b(e)}}}function Dn(t){let e,n;return e=new Fn({props:{message:t[13],field:t[10].field,label:t[10].label}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};5&n&&(l.message=t[13]),1&n&&(l.field=t[10].field),1&n&&(l.label=t[10].label),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Hn(t){let e,n,l,i;e=new zn({props:{label:t[10].label,inlineLabel:t[10].inlineLabel,hint:t[10].hint,$$slots:{default:[Pn]},$$scope:{ctx:t}}});let s=t[2][t[10].field]&&qn(t);return{c(){rt(e.$$.fragment),n=k(),s&&s.c(),l=Q()},m(t,o){at(e,t,o),v(t,n,o),s&&s.m(t,o),v(t,l,o),i=!0},p(t,n){const i={};1&n&&(i.label=t[10].label),1&n&&(i.inlineLabel=t[10].inlineLabel),1&n&&(i.hint=t[10].hint),524291&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),t[2][t[10].field]?s?(s.p(t,n),5&n&&nt(s,1)):(s=qn(t),s.c(),nt(s,1),s.m(l.parentNode,l)):s&&(tt(),lt(s,1,1,(()=>{s=null})),et())},i(t){i||(nt(e.$$.fragment,t),nt(s),i=!0)},o(t){lt(e.$$.fragment,t),lt(s),i=!1},d(t){ut(e,t),t&&b(n),s&&s.d(t),t&&b(l)}}}function Jn(t){let e,n,l=t[7].inputs,i=[];for(let e=0;e<l.length;e+=1)i[e]=Hn(Nn(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=k()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);v(t,e,l),n=!0},p(t,n){if(7&n){let o;for(l=t[7].inputs,o=0;o<l.length;o+=1){const s=Nn(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=Hn(s),i[o].c(),nt(i[o],1),i[o].m(e.parentNode,e))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(t){y(i,t),t&&b(e)}}}function Vn(t){let e,n;return e=new En({props:{label:t[7].label,wide:t[7].wide,$$slots:{default:[Jn]},$$scope:{ctx:t}}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.label=t[7].label),1&n&&(l.wide=t[7].wide),524295&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Yn(t){let e,n,l,i,s,o,c,r,a,u,f,d,h,p,m,g=t[0].label+"",Q=t[0].info+"",_=t[0].buttons,E=[];for(let e=0;e<_.length;e+=1)E[e]=In(Bn(t,_,e));let M=t[0].class.sections,O=[];for(let e=0;e<M.length;e+=1)O[e]=Vn(Ln(t,M,e));const z=t=>lt(O[t],1,1,(()=>{O[t]=null}));return{c(){e=x("header"),n=x("i"),i=k(),s=x("div"),o=x("div"),c=w(g),r=k(),a=x("div"),u=w(Q),f=k(),d=x("nav");for(let t=0;t<E.length;t+=1)E[t].c();h=k(),p=x("main");for(let t=0;t<O.length;t+=1)O[t].c();S(n,"class",l="icon "+t[0].icon+" Q8nwlse"),S(o,"class","label Q8nwlse"),S(a,"class","info Q8nwlse"),S(d,"class","nav Q8nwlse"),S(e,"class","Q8nwlse"),S(p,"class","Q8nwlse")},m(t,l){v(t,e,l),$(e,n),$(e,i),$(e,s),$(s,o),$(o,c),$(s,r),$(s,a),$(a,u),$(e,f),$(e,d);for(let t=0;t<E.length;t+=1)E[t].m(d,null);v(t,h,l),v(t,p,l);for(let t=0;t<O.length;t+=1)O[t].m(p,null);m=!0},p(t,[e]){if((!m||1&e&&l!==(l="icon "+t[0].icon+" Q8nwlse"))&&S(n,"class",l),(!m||1&e)&&g!==(g=t[0].label+"")&&C(c,g),(!m||1&e)&&Q!==(Q=t[0].info+"")&&C(u,Q),1&e){let n;for(_=t[0].buttons,n=0;n<_.length;n+=1){const l=Bn(t,_,n);E[n]?E[n].p(l,e):(E[n]=In(l),E[n].c(),E[n].m(d,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=_.length}if(7&e){let n;for(M=t[0].class.sections,n=0;n<M.length;n+=1){const l=Ln(t,M,n);O[n]?(O[n].p(l,e),nt(O[n],1)):(O[n]=Vn(l),O[n].c(),nt(O[n],1),O[n].m(p,null))}for(tt(),n=M.length;n<O.length;n+=1)z(n);et()}},i(t){if(!m){for(let t=0;t<M.length;t+=1)nt(O[t]);m=!0}},o(t){O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)lt(O[t]);m=!1},d(t){t&&b(e),y(E,t),t&&b(h),t&&b(p),y(O,t)}}}function Rn(t,e,n){let l,i,{doc:s}=e,o=s.item;c(t,o,(t=>n(1,l=t)));let r=s.validationErrors;c(t,r,(t=>n(2,i=t))),s.load();return t.$$set=t=>{"doc"in t&&n(0,s=t.doc)},[s,l,i,o,r,t=>t.onClick(s),function(e,n){t.$$.not_equal(l[n.field],e)&&(l[n.field]=e,o.set(l))}]}class Un extends dt{constructor(t){super(),ft(this,t,Rn,Yn,o,{doc:0})}}class Wn{label;wide;inputs=[];constructor(t,e){this.label=t,this.wide=e}add(...t){return t.forEach((t=>this.inputs.push(t))),this}}class Kn extends me{get class(){return Object.getPrototypeOf(this).constructor}static component=Un;static buttons;static label;static info;static sections=[];static fetcher;static list;validationErrors=bt([]);static create(t,e,n,l,i,s,o,c=(t=>"id: "+t.id)){return Object.assign(class extends(this){},{$idPrefix:t,list:e,icon:n,buttons:i,label:o,sections:s,fetcher:l,info:c})}get label(){return this.class.label(this._item)}get info(){return this.class.info(this._item)}get list(){return this.class.list}get exists(){return"number"==typeof this._item.id}get buttons(){return this.class.buttons}static addAction(t){this.buttons.push(t)}_item={id:null};item=bt(this._item);load(){this.class.fetcher.get(this.id).then((t=>{this._item=t,this.item.set(t),this.id=t.id,pe.update((t=>t))})).catch((t=>{throw this.close(),t}))}save(){this.validationErrors.set({}),this.class.fetcher.save(this.id,this._item).then((t=>{xt.success("Saved successfully"),this.id=t.id,this.list.reload(),this.load()})).catch((t=>{throw t instanceof Zt&&t.response.json().then((t=>{let e={};t.forEach((t=>{void 0===e[t.field]&&(e[t.field]=[]),e[t.field].push(t.message)})),this.validationErrors.set(e)})),t}))}delete(){confirm("You are about to delete:\n"+this.label+"\nAre you sure?")&&this.class.fetcher.delete(this.id).then((()=>this.close())).then((()=>this.list.reload()))}static addSection(t,e=!1){let n=new Wn(t,e);return this.sections.push(n),n}static createSection(t,e=!1){return new Wn(t,e)}}class Xn{api;attachment;constructor(t){this.api=t,this.api=this.api+"/",this.attachment=new Zn(this.api+"attachments/")}get(t){return fetch(this.api+(null!==t?t:"blank")).then(Gt)}save(t,e){return fetch(this.api+(null!==t?t:"new"),{method:"POST",body:JSON.stringify({item:e})}).then(Gt)}delete(t){return fetch(this.api+t,{method:"DELETE"}).then(Gt)}}class Zn{api;constructor(t){this.api=t}get(t,e){return fetch(this.api+t+"/"+e).then(Gt)}upload(t,e,n){let l=new FormData;return l.append("file",e),l.append("collection",t),fetch(this.api+"upload/"+n,{method:"POST",body:l}).then(Gt)}modify(t,e,n){return fetch(this.api+"modify/"+t,{method:"POST",body:JSON.stringify({filename:e,data:n})}).then(Gt)}remove(t,e,n){return fetch(this.api+"delete/"+e,{method:"POST",body:JSON.stringify({filename:n,collection:t})}).then(Gt)}order(t,e,n,l){return fetch(this.api+"order/"+t,{method:"POST",body:JSON.stringify({collection:e,index:l,filename:n})}).then(Gt)}add(t,e,n,l){return fetch(this.api+"add/"+t,{method:"POST",body:JSON.stringify({collection:e,filename:n,from:l})}).then(Gt)}}function Gn(e){let n,l,i;return{c(){n=x("input"),S(n,"type","text"),S(n,"class","Qecdhov")},m(t,s){v(t,n,s),O(n,e[0]),l||(i=_(n,"input",e[2]),l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&O(n,t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i()}}}function tl(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)}]}class el extends dt{constructor(t){super(),ft(this,t,tl,Gn,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}}class nl{field;label;static component;hint=null;properties={};inlineLabel=!0;constructor(t,e=null){this.field=t,this.label=e,"object"==typeof t?(this.label=this.label??t.label,this.field=t.field):this.label=null!==this.label?this.label:this.field.toString()}get compact(){return this.inlineLabel=!0,this}get wide(){return this.inlineLabel=!1,this}get component(){return Object.getPrototypeOf(this).constructor.component}addHint(t){return this.hint=t,this}}class ll extends nl{static component=el}function il(e){let n,l,i;return{c(){n=x("input"),S(n,"type","checkbox"),S(n,"class","Q91bogf")},m(t,s){v(t,n,s),n.checked=e[0],l||(i=_(n,"change",e[2]),l=!0)},p(t,[e]){1&e&&(n.checked=t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i()}}}function sl(t,e,n){let{value:l=!1}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},t.$$.update=()=>{1&t.$$.dirty&&n(0,l=l??!1)},[l,"",function(){l=this.checked,n(0,l)}]}class ol extends dt{constructor(t){super(),ft(this,t,sl,il,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}}class cl extends nl{static component=ol;inline(){}}function rl(e){let n,l,s;return{c(){n=x("input"),S(n,"type","text"),S(n,"class","Qecdhov")},m(t,i){v(t,n,i),O(n,e[0]),l||(s=[_(n,"input",e[3]),_(n,"input",e[1])],l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&O(n,t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i(s)}}}function al(t,e,n){let{value:l="0"}=e,i=l;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,function(){if(""===l)return n(0,l="0");if("0-"===l||"-"===l)return n(0,l="-0");let t=parseInt(l);isNaN(t)?n(0,l=i):n(0,l=t.toString()),i=l},"",function(){l=this.value,n(0,l)}]}class ul extends dt{constructor(t){super(),ft(this,t,al,rl,o,{name:2,value:0})}get name(){return this.$$.ctx[2]}}class fl extends nl{static component=ul}function dl(e){let n,l,s;return{c(){n=x("input"),S(n,"type","text"),S(n,"class","Qecdhov")},m(t,i){v(t,n,i),O(n,e[0]),l||(s=[_(n,"input",e[3]),_(n,"input",e[1])],l=!0)},p(t,[e]){1&e&&n.value!==t[0]&&O(n,t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i(s)}}}function hl(t,e,n){let{value:l="0"}=e,i=l;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,function(){if(""===l)return n(0,l="0");if("0-"===l||"-"===l)return n(0,l="-0");let t=parseFloat(l);isNaN(t)?n(0,l=i):n(0,l=t.toString()),Math.ceil(t)===t&&n(0,l+=".0"),i=l},"",function(){l=this.value,n(0,l)}]}class pl extends dt{constructor(t){super(),ft(this,t,hl,dl,o,{name:2,value:0})}get name(){return this.$$.ctx[2]}}class ml extends nl{static component=pl}function gl(t,e,n){const l=t.slice();return l[5]=e[n],l}function $l(t){let e,n,l,i,s,o,c,r,a=t[5].label+"";return{c(){e=x("label"),n=x("input"),s=k(),o=w(a),S(n,"type","checkbox"),n.value=l=t[5].value,n.checked=i=t[0].indexOf(t[5].value)>=0,S(n,"class","Q11xkb35"),S(e,"class","Q11xkb35")},m(l,i){v(l,e,i),$(e,n),$(e,s),$(e,o),c||(r=_(n,"change",t[3]),c=!0)},p(t,e){2&e&&l!==(l=t[5].value)&&(n.value=l),3&e&&i!==(i=t[0].indexOf(t[5].value)>=0)&&(n.checked=i),2&e&&a!==(a=t[5].label+"")&&C(o,a)},d(t){t&&b(e),c=!1,r()}}}function vl(e){let n,l=e[1],i=[];for(let t=0;t<l.length;t+=1)i[t]=$l(gl(e,l,t));return{c(){n=x("main");for(let t=0;t<i.length;t+=1)i[t].c();S(n,"class","Q11xkb35"),F(n,"inline",e[2])},m(t,e){v(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(11&e){let s;for(l=t[1],s=0;s<l.length;s+=1){const o=gl(t,l,s);i[s]?i[s].p(o,e):(i[s]=$l(o),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}4&e&&F(n,"inline",t[2])},i:t,o:t,d(t){t&&b(n),y(i,t)}}}function bl(t,e,n){let{value:l=[]}=e,{options:i=[]}=e,{inline:s}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options),"inline"in t&&n(2,s=t.inline)},[l,i,s,function(t){let e=t.target.value,n=l.indexOf(e);-1===n?l.push(e):l.splice(n,1)},""]}class yl extends dt{constructor(t){super(),ft(this,t,bl,vl,o,{value:0,options:1,inline:2,name:4})}get name(){return this.$$.ctx[4]}}class xl extends nl{static component=yl;props={options:[],inline:!1};get inline(){return this.props.inline=!0,this}options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function wl(t,e,n){const l=t.slice();return l[4]=e[n],l}function kl(t){let e,n,l,i,s,o,c,r,a=t[4].label+"";return{c(){e=x("label"),n=x("input"),s=k(),o=w(a),S(n,"name",t[2]),S(n,"type","radio"),n.value=l=t[4].value,n.checked=i=t[4].value===t[0],S(n,"class","Qf4zgwr"),S(e,"class","Qf4zgwr")},m(l,i){v(l,e,i),$(e,n),$(e,s),$(e,o),c||(r=_(n,"input",t[3]),c=!0)},p(t,e){2&e&&l!==(l=t[4].value)&&(n.value=l),3&e&&i!==(i=t[4].value===t[0])&&(n.checked=i),2&e&&a!==(a=t[4].label+"")&&C(o,a)},d(t){t&&b(e),c=!1,r()}}}function Ql(e){let n,l=e[1],i=[];for(let t=0;t<l.length;t+=1)i[t]=kl(wl(e,l,t));return{c(){n=x("main");for(let t=0;t<i.length;t+=1)i[t].c();S(n,"class","Qf4zgwr")},m(t,e){v(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(15&e){let s;for(l=t[1],s=0;s<l.length;s+=1){const o=wl(t,l,s);i[s]?i[s].p(o,e):(i[s]=kl(o),i[s].c(),i[s].m(n,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}},i:t,o:t,d(t){t&&b(n),y(i,t)}}}function _l(t,e,n){let{value:l=""}=e,{options:i=[]}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options)},[l,i,"",function(t){n(0,l=t.target.value)}]}class El extends dt{constructor(t){super(),ft(this,t,_l,Ql,o,{value:0,options:1,name:2})}get name(){return this.$$.ctx[2]}}class Ml extends nl{static component=El;props={options:[],inline:!1};get inline(){return this.props.inline=!0,this}options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function Sl(t,e,n){const l=t.slice();return l[5]=e[n],l}function Cl(t){let e,n,l,i=t[5].label+"";return{c(){e=x("option"),n=w(i),e.__value=l=t[5].value,e.value=e.__value},m(t,l){v(t,e,l),$(e,n)},p(t,s){2&s&&i!==(i=t[5].label+"")&&C(n,i),2&s&&l!==(l=t[5].value)&&(e.__value=l,e.value=e.__value)},d(t){t&&b(e)}}}function Ol(e){let n,l,i,s=e[1],o=[];for(let t=0;t<s.length;t+=1)o[t]=Cl(Sl(e,s,t));return{c(){n=x("select");for(let t=0;t<o.length;t+=1)o[t].c();S(n,"name",e[2]),S(n,"class","Q34nr8x"),void 0===e[0]&&R((()=>e[3].call(n)))},m(t,s){v(t,n,s);for(let t=0;t<o.length;t+=1)o[t].m(n,null);T(n,e[0]),l||(i=_(n,"change",e[3]),l=!0)},p(t,[e]){if(2&e){let l;for(s=t[1],l=0;l<s.length;l+=1){const i=Sl(t,s,l);o[l]?o[l].p(i,e):(o[l]=Cl(i),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}3&e&&T(n,t[0])},i:t,o:t,d(t){t&&b(n),y(o,t),l=!1,i()}}}function zl(t,e,n){let{value:l=""}=e,{options:i=[]}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"options"in t&&n(1,i=t.options)},[l,i,"",function(){l=j(this),n(0,l),n(1,i)}]}class Tl extends dt{constructor(t){super(),ft(this,t,zl,Ol,o,{value:0,options:1,name:2})}get name(){return this.$$.ctx[2]}}class jl extends nl{static component=Tl;props={options:[]};options(t){let e=[];if(t instanceof Array)t.forEach((t=>{"string"==typeof t?e.push({value:t,label:t}):void 0!==t.label&&void 0!==t.value?e.push({value:t.value,label:t.label}):e.push({value:Object.keys(t)[0],label:t[Object.keys(t)[0]]})}));else{Object.keys(t).forEach((n=>e.push({value:n,label:t[n]})))}return this.props.options=e,this}}function Fl(e){let n,l,s,o;return{c(){n=x("div"),l=x("textarea"),S(l,"class","Q1tywl61"),F(l,"code",e[1]),S(n,"data-replicated-value",e[0]),S(n,"class","Q1tywl61"),F(n,"growing",!0),F(n,"code",e[1])},m(t,i){v(t,n,i),$(n,l),O(l,e[0]),s||(o=[_(l,"keydown",Ll),_(l,"input",e[3])],s=!0)},p(t,[e]){1&e&&O(l,t[0]),2&e&&F(l,"code",t[1]),1&e&&S(n,"data-replicated-value",t[0]),2&e&&F(n,"code",t[1])},i:t,o:t,d(t){t&&b(n),s=!1,i(o)}}}function Ll(t){let e=t.target;if(9===t.keyCode){let n=e.value,l=e.selectionStart,i=e.selectionEnd;e.value=n.substring(0,l)+"\t"+n.substring(i),e.selectionStart=e.selectionEnd=l+1,t.preventDefault()}}function Nl(t,e,n){let{value:l=""}=e;let{code:i=!1}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"code"in t&&n(1,i=t.code)},[l,i,"",function(){l=this.value,n(0,l)}]}class Al extends dt{constructor(t){super(),ft(this,t,Nl,Fl,o,{value:0,name:2,code:1})}get name(){return this.$$.ctx[2]}}class Bl extends nl{static component=Al;props={code:!1};get code(){return this.props.code=!0,this}}function Il(e){let n,l,s,o,c;return{c(){n=x("input"),l=k(),s=x("input"),S(n,"type","text"),S(n,"maxlength","7"),S(n,"minlength","7"),S(n,"class","Q1npq0or"),S(s,"type","color"),S(s,"class","Q1npq0or")},m(t,i){v(t,n,i),O(n,e[0]),v(t,l,i),v(t,s,i),O(s,e[0]),o||(c=[_(n,"input",e[2]),_(s,"input",e[3])],o=!0)},p(t,[e]){1&e&&n.value!==t[0]&&O(n,t[0]),1&e&&O(s,t[0])},i:t,o:t,d(t){t&&b(n),t&&b(l),t&&b(s),o=!1,i(c)}}}function Pl(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)},function(){l=this.value,n(0,l)}]}class ql extends dt{constructor(t){super(),ft(this,t,Pl,Il,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}}class Dl extends nl{static component=ql}function Hl(e){let n,l,i;return{c(){n=x("input"),S(n,"type","time"),S(n,"class","Qecdhov")},m(t,s){v(t,n,s),O(n,e[0]),l||(i=_(n,"input",e[2]),l=!0)},p(t,[e]){1&e&&O(n,t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i()}}}function Jl(t,e,n){let{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,"",function(){l=this.value,n(0,l)}]}class Vl extends dt{constructor(t){super(),ft(this,t,Jl,Hl,o,{value:0,name:1})}get name(){return this.$$.ctx[1]}}class Yl extends nl{static component=Vl}function Rl(e){let n,l,s;return{c(){n=x("input"),S(n,"type","datetime-local"),S(n,"class","Qecdhov")},m(t,i){v(t,n,i),O(n,e[0]),l||(s=[_(n,"input",e[1]),_(n,"input",e[4])],l=!0)},p(t,[e]){1&e&&O(n,t[0])},i:t,o:t,d(t){t&&b(n),l=!1,i(s)}}}function Ul(t,e=!1,n=!1){if(""===t||null===t)return null;if(t instanceof Date||(t=new Date(t)),isNaN(t))return null;let l;return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+(e?"T":" ")+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+(n?(l=(new Date).getTimezoneOffset())?(l>0?"-":"+")+("0"+Math.floor(Math.abs(l)/60)).slice(-2)+":"+("0"+Math.floor(Math.abs(l)%60)).slice(-2):"Z":"")}function Wl(t,e,n){let l,{value:i=""}=e;return t.$$set=t=>{"value"in t&&n(2,i=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(0,l=Ul(i,!0))},[l,function(t){let e=t.target.value;n(2,i=Ul(e,!0,!0)??""),console.log(i)},i,"",function(){l=this.value,n(0,l),n(2,i)}]}class Kl extends dt{constructor(t){super(),ft(this,t,Wl,Rl,o,{value:2,name:3})}get name(){return this.$$.ctx[3]}}class Xl extends nl{static component=Kl}function Zl(t,e,n){const l=t.slice();return l[15]=e[n],l}function Gl(t,e,n){const l=t.slice();return l[18]=e[n],l}function ti(t){let e,n,l,i,s=t[18].value+"";function o(){return t[11](t[18])}return{c(){e=x("div"),n=w(s),S(e,"class","Qy0x57")},m(t,s){v(t,e,s),$(e,n),l||(i=_(e,"click",o),l=!0)},p(e,l){t=e,4&l&&s!==(s=t[18].value+"")&&C(n,s)},d(t){t&&b(e),l=!1,i()}}}function ei(t){let e,n=t[1],l=[];for(let e=0;e<n.length;e+=1)l[e]=li(Zl(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Q()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);v(t,e,n)},p(t,i){if(99&i){let s;for(n=t[1],s=0;s<n.length;s+=1){const o=Zl(t,n,s);l[s]?l[s].p(o,i):(l[s]=li(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){y(l,t),t&&b(e)}}}function ni(t){let e,n,l;function i(){return t[13](t[15])}return{c(){e=x("i"),S(e,"class","open fas fa-external-link-alt Qy0x57")},m(t,s){v(t,e,s),n||(l=_(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,l()}}}function li(t){let e,n,l,i,s,o,c,r,a,u,f,d,h=t[15].value+"",p=t[15].id+"";function m(){return t[12](t[15])}let g=t[0]&&ni(t);return{c(){e=x("span"),n=x("i"),l=k(),i=x("span"),s=w(h),o=w(" ("),c=w(p),r=w(")"),a=k(),g&&g.c(),u=k(),S(n,"class","remove fas fa-times Qy0x57"),S(i,"class","Qy0x57"),S(e,"class","Qy0x57")},m(t,h){v(t,e,h),$(e,n),$(e,l),$(e,i),$(i,s),$(i,o),$(i,c),$(i,r),$(e,a),g&&g.m(e,null),$(e,u),f||(d=_(n,"click",m),f=!0)},p(n,l){t=n,2&l&&h!==(h=t[15].value+"")&&C(s,h),2&l&&p!==(p=t[15].id+"")&&C(c,p),t[0]?g?g.p(t,l):(g=ni(t),g.c(),g.m(e,u)):g&&(g.d(1),g=null)},d(t){t&&b(e),g&&g.d(),f=!1,d()}}}function ii(e){let n,l,i,s,o,c,r,a,u=e[2],f=[];for(let t=0;t<u.length;t+=1)f[t]=ti(Gl(e,u,t));let d=null!==e[1]&&ei(e);return{c(){n=x("main"),l=x("input"),i=k(),s=x("div");for(let t=0;t<f.length;t+=1)f[t].c();o=k(),c=x("div"),d&&d.c(),S(l,"type","text"),S(l,"placeholder","search"),S(l,"class","Qy0x57"),S(s,"class","options Qy0x57"),S(c,"class","values Qy0x57"),S(n,"class","Qy0x57")},m(t,u){v(t,n,u),$(n,l),$(n,i),$(n,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);$(n,o),$(n,c),d&&d.m(c,null),r||(a=_(l,"input",e[3]),r=!0)},p(t,[e]){if(20&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const l=Gl(t,u,n);f[n]?f[n].p(l,e):(f[n]=ti(l),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}null!==t[1]?d?d.p(t,e):(d=ei(t),d.c(),d.m(c,null)):d&&(d.d(1),d=null)},i:t,o:t,d(t){t&&b(n),y(f,t),d&&d.d(),r=!1,a()}}}function si(t,e,n){let{value:l=""}=e,{api:i=""}=e;let{Form:s=null}=e,{multi:o=!1}=e,c=[],r="",a=[];function u(t){o?(l instanceof Array||n(7,l=[]),n(7,l=[...new Set([...l,t])])):n(7,l=t)}function f(t){if(o){let e=l.indexOf(t);-1!==e&&l.splice(e,1),n(7,l=[...l])}else n(7,l="")}function d(t){s.open(t)}A((()=>{null===l&&n(7,l=[]),l!==r&&(0===l.length?n(1,c=[]):fetch(i+"/get/"+l).then((t=>t.json().then((t=>n(1,c=t))))),r=l)}));return t.$$set=t=>{"value"in t&&n(7,l=t.value),"api"in t&&n(8,i=t.api),"Form"in t&&n(0,s=t.Form),"multi"in t&&n(10,o=t.multi)},[s,c,a,function(t){t.target.value.trim().length>=3?fetch(i+"/search/"+t.target.value).then((t=>t.json())).then((t=>n(2,a=t))):n(2,a=[])},u,f,d,l,i,"",o,t=>u(t.id),t=>f(t.id),t=>d(t.id)]}class oi extends dt{constructor(t){super(),ft(this,t,si,ii,o,{value:7,api:8,name:9,Form:0,multi:10})}get name(){return this.$$.ctx[9]}}class ci extends nl{static component=oi;props={api:"",multi:!1,Form:null};api(t){return this.props.api=t,this}form(t){return this.props.Form=t,this}get multi(){return this.props.multi=!0,this}}function ri(e){let n,l,i,s;return{c(){n=x("button"),l=w(e[0]),S(n,"class","Q6zjvl8")},m(t,o){v(t,n,o),$(n,l),i||(s=_(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&C(l,t[0])},i:t,o:t,d(t){t&&b(n),i=!1,s()}}}function ai(t,e,n){let{value:l=""}=e;let{Editor:i=null}=e,{buttonText:s="Open"}=e;function o(t){n(2,l=t)}return t.$$set=t=>{"value"in t&&n(2,l=t.value),"Editor"in t&&n(4,i=t.Editor),"buttonText"in t&&n(0,s=t.buttonText)},[s,function(){De.show(i,{value:l,save:o})},l,"",i]}class ui extends dt{constructor(t){super(),ft(this,t,ai,ri,o,{value:2,name:3,Editor:4,buttonText:0})}get name(){return this.$$.ctx[3]}}class fi extends nl{static component=ui;props={Editor:null,buttonText:"Open Editor"};editor(t){return this.props.Editor=t,this}buttonText(t){return this.props.buttonText=t,this}}function di(t,e,n){const l=t.slice();return l[8]=e[n],l}function hi(t){let e,n=t[0],l=[];for(let e=0;e<n.length;e+=1)l[e]=pi(di(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Q()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);v(t,e,n)},p(t,i){if(3&i){let s;for(n=t[0],s=0;s<n.length;s+=1){const o=di(t,n,s);l[s]?l[s].p(o,i):(l[s]=pi(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){y(l,t),t&&b(e)}}}function pi(t){let e,n,l,i,s,o,c,r,a,u,f,d,h=t[8].value+"",p=t[8].id+"";function m(){return t[6](t[8])}return{c(){e=x("span"),n=w(h),l=k(),i=x("i"),s=w("("),o=w(p),c=w(")"),r=k(),a=x("i"),u=k(),S(i,"class","Q10d2l6t"),S(a,"class","open fas fa-external-link Q10d2l6t"),S(e,"class","Q10d2l6t")},m(t,h){v(t,e,h),$(e,n),$(e,l),$(e,i),$(i,s),$(i,o),$(i,c),$(e,r),$(e,a),$(e,u),f||(d=_(e,"click",m),f=!0)},p(e,l){t=e,1&l&&h!==(h=t[8].value+"")&&C(n,h),1&l&&p!==(p=t[8].id+"")&&C(o,p)},d(t){t&&b(e),f=!1,d()}}}function mi(e){let n,l,i=e[0]&&hi(e);return{c(){n=x("main"),l=x("div"),i&&i.c(),S(l,"class","values Q10d2l6t"),S(n,"class","Q10d2l6t")},m(t,e){v(t,n,e),$(n,l),i&&i.m(l,null)},p(t,[e]){t[0]?i?i.p(t,e):(i=hi(t),i.c(),i.m(l,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&b(n),i&&i.d()}}}function gi(t,e,n){let{value:l=""}=e,{api:i=""}=e;let{Form:s=null}=e,o=[],c="";function r(t){s.open(t)}A((()=>{l!==c&&(0===l.length?n(0,o=[]):fetch(i+"/get/"+l).then((t=>t.json().then((t=>n(0,o=t))))),c=l)}));return t.$$set=t=>{"value"in t&&n(2,l=t.value),"api"in t&&n(3,i=t.api),"Form"in t&&n(5,s=t.Form)},[o,r,l,i,"",s,t=>r(t.id)]}class $i extends dt{constructor(t){super(),ft(this,t,gi,mi,o,{value:2,api:3,name:4,Form:5})}get name(){return this.$$.ctx[4]}}class vi extends nl{static component=$i;props={api:"",Form:null};api(t){return this.props.api=t,this}form(t){return this.props.Form=t,this}}class bi{static create(t,e,n,l,i,s=(t=>"id: "+t.id)){return"string"==typeof l&&(l=new Xn(l)),Object.assign(class extends Kn{},{$idPrefix:e,list:t,icon:n,buttons:[],label:i,fetcher:l,info:s,sections:[]})}static Doc=Kn;static Fetcher=Xn;static Section=Wn;static inputs=class{static string(t,e=null){return new ll(t,e)}static checkbox(t,e=null){return new cl(t,e)}static checkboxes(t,e=null){return new xl(t,e)}static integer(t,e=null){return new fl(t,e)}static float(t,e=null){return new ml(t,e)}static radio(t,e=null){return new Ml(t,e)}static time(t,e=null){return new Yl(t,e)}static select(t,e=null){return new jl(t,e)}static text(t,e=null){return new Bl(t,e)}static color(t,e=null){return new Dl(t,e)}static date(t,e=null){return new Xl(t,e)}static datetime(t,e=null){return new Xl(t,e)}static selector(t,e=null){return new ci(t,e)}static editor(t,e=null){return new fi(t,e)}static related(t,e=null){return new vi(t,e)}}}class yi{icon;label;onClick;active;constructor(t,e,n,l=(t=>!0)){this.icon=t,this.label=e,this.onClick=n,this.active=l}}const xi=t=>({}),wi=t=>({}),ki=t=>({}),Qi=t=>({});function _i(t){let e,n,l,i,s,o,c,a,f,d,h;const p=t[7].nav,m=r(p,t,t[9],Qi),g=t[7].default,y=r(g,t,t[9],null),Q=t[7].footer,_=r(Q,t,t[9],wi);return{c(){e=x("main"),n=x("header"),l=x("i"),i=k(),s=x("div"),o=w(t[1]),c=k(),m&&m.c(),a=k(),f=x("section"),y&&y.c(),d=k(),_&&_.c(),S(l,"class",t[0]),S(e,"class","modalify"),F(e,"big",t[2]),F(e,"full",t[3]),F(e,"rounded",t[4])},m(r,u){v(r,e,u),$(e,n),$(n,l),$(n,i),$(n,s),$(s,o),$(n,c),m&&m.m(n,null),$(e,a),$(e,f),y&&y.m(f,null),$(e,d),_&&_.m(e,null),t[8](e),h=!0},p(t,n){(!h||1&n)&&S(l,"class",t[0]),(!h||2&n)&&C(o,t[1]),m&&m.p&&(!h||512&n)&&u(m,p,t,t[9],h?n:-1,ki,Qi),y&&y.p&&(!h||512&n)&&u(y,g,t,t[9],h?n:-1,null,null),_&&_.p&&(!h||512&n)&&u(_,Q,t,t[9],h?n:-1,xi,wi),4&n&&F(e,"big",t[2]),8&n&&F(e,"full",t[3]),16&n&&F(e,"rounded",t[4])},i(t){h||(nt(m,t),nt(y,t),nt(_,t),h=!0)},o(t){lt(m,t),lt(y,t),lt(_,t),h=!1},d(n){n&&b(e),m&&m.d(n),y&&y.d(n),_&&_.d(n),t[8](null)}}}function Ei(t){let e,n;return e=new $t({props:{icon:!1,$$slots:{default:[_i]},$$scope:{ctx:t}}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,[n]){const l={};575&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Mi(t,e,n){let l,{$$slots:i={},$$scope:s}=e,{icon:o="inverse fad fa-atom"}=e,{title:c="Magic"}=e,{big:r=!1}=e,{full:a=!1}=e,{rounded:u=!1}=e;return t.$$set=t=>{"icon"in t&&n(0,o=t.icon),"title"in t&&n(1,c=t.title),"big"in t&&n(2,r=t.big),"full"in t&&n(3,a=t.full),"rounded"in t&&n(4,u=t.rounded),"$$scope"in t&&n(9,s=t.$$scope)},[o,c,r,a,u,l,function(t=800){return console.log("CALLED"),new Promise((e=>{l.classList.add("shake"),setTimeout((()=>{l.classList.remove("shake"),e(this)}),t)}))},i,function(t){q[t?"unshift":"push"]((()=>{l=t,n(5,l)}))},s]}class Si extends dt{constructor(t){super(),ft(this,t,Mi,Ei,o,{icon:0,title:1,big:2,full:3,rounded:4,shake:6})}get shake(){return this.$$.ctx[6]}}var Ci,Oi=(function(t,e){e.__esModule=!0,e.b=1,e.kb=1024,e.mb=e.kb*e.kb,e.gb=e.mb*e.kb,e.tb=e.gb*e.kb,e.pb=e.tb*e.kb,e.eb=e.pb*e.kb,e.zb=e.eb*e.kb,e.yb=e.zb*e.kb,e.units={b:e.b,kb:e.kb,mb:e.mb,gb:e.gb,tb:e.tb,pb:e.pb,eb:e.eb,zb:e.zb,yb:e.yb},e.parseFormat=/^((-|\+)?(\d+(?:\.\d+)?)) *(b|kb|mb|gb|tb|pb|eb|zb|yb)$/i,e.parseThousand=/\B(?=(\d{3})+(?!\d))/g}(Ci={exports:{}},Ci.exports),Ci.exports),zi=Object.defineProperty({formatToObject:function(t){var e=Oi.parseFormat.exec(t);return{unit:e&&e[4],size:e&&parseFloat(e[1]),format:e&&e[0]}}},"__esModule",{value:!0}),Ti=Object.defineProperty({toString:function(t,e){var n=void 0===e?{}:e,l=n.decimals,i=n.separator,s=void 0===i?"":i,o=n.everyThousand,c=void 0===o?"":o,r="B",a=t;return t>=0&&t<Oi.kb?r="B":t>=Oi.kb&&t<Oi.mb?r="KB":t>=Oi.mb&&t<Oi.gb?r="MB":t>=Oi.gb&&t<Oi.tb?r="GB":t>=Oi.tb&&t<Oi.pb?r="TB":t>=Oi.pb&&t<Oi.eb?r="PB":t>=Oi.eb&&t<Oi.zb?r="EB":t>=Oi.zb&&t<Oi.yb?r="ZB":t>=Oi.yb&&(r="YB"),a=t/Oi.units[r.toLowerCase()],void 0!==l&&(a=a.toFixed(l)),a=""+a+s+r,""!==c&&(a=a.replace(Oi.parseThousand,c)),a}},"__esModule",{value:!0}),ji=Object.defineProperty({toNumber:function(t){if(!isNaN(Number(t)))return Number(t);var e=zi.formatToObject(t);return e.unit&&e.size?Oi.units[e.unit.toLowerCase()]*e.size:null}},"__esModule",{value:!0}),Fi=Object.defineProperty({cbytes:function(t,e){return"number"==typeof t?Ti.toString(t,e):"string"==typeof t?ji.toNumber(t):void 0}},"__esModule",{value:!0}),Li=Object.defineProperty({sizeToObject:function(t){var e=Fi.cbytes(t);return zi.formatToObject(e)}},"__esModule",{value:!0}),Ni=Object.defineProperty({objectToFormat:function(t,e){var n=(void 0===e?{separator:""}:e).separator;return t.format&&t.size+n+t.unit}},"__esModule",{value:!0}),Ai=Fi.cbytes,Bi=Fi.cbytes,Ii=Ti.toString,Pi=ji.toNumber,qi=Ni.objectToFormat,Di=zi.formatToObject,Hi=Li.sizeToObject;function Ji(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,y,w,Q,E,M,C,O;return{c(){e=x("main"),n=x("div"),l=x("img"),o=k(),c=x("img"),u=k(),f=x("div"),h=k(),p=x("div"),g=k(),y=x("div"),Q=k(),E=x("div"),S(l,"alt",""),S(l,"draggable","false"),S(l,"class","back Q13d6rkl"),l.src!==(s=t[0].url)&&S(l,"src",s),S(c,"alt",""),S(c,"style",r="clip: rect("+t[2].y+"px, "+(t[2].x+t[2].width)+"px, "+(t[2].y+t[2].height)+"px, "+t[2].x+"px)"),S(c,"draggable","false"),S(c,"class","front Q13d6rkl"),c.src!==(a=t[0].url)&&S(c,"src",a),S(f,"class","frame Q13d6rkl"),S(f,"style",d="top:"+t[2].y+"px;width:"+t[2].width+"px;height:"+t[2].height+"px;left:"+t[2].x+"px;"),S(p,"class","topleft Q13d6rkl"),S(p,"style",m="top:"+(t[2].y-5)+"px;left:"+(t[2].x-5)+"px;"),S(y,"class","bottomright Q13d6rkl"),S(y,"style",w="top:"+(t[2].y+t[2].height-5)+"px;left:"+(t[2].x+t[2].width-5)+"px;"),S(E,"class","focus Q13d6rkl"),S(E,"style",M="top:"+(t[3].y-5)+"px;left:"+(t[3].x-5)+"px;"),S(n,"class","container Q13d6rkl"),S(e,"class","Q13d6rkl")},m(i,s){v(i,e,s),$(e,n),$(n,l),$(n,o),$(n,c),$(n,u),$(n,f),$(n,h),$(n,p),t[18](p),$(n,g),$(n,y),t[21](y),$(n,Q),$(n,E),t[24](E),t[25](n),C||(O=[_(l,"load",t[12]),_(p,"mousedown",t[16]),_(p,"mouseup",t[17]),_(y,"mousedown",t[19]),_(y,"mouseup",t[20]),_(E,"mousedown",t[22]),_(E,"mouseup",t[23]),_(n,"mousemove",t[10])],C=!0)},p(t,e){1&e&&l.src!==(s=t[0].url)&&S(l,"src",s),4&e&&r!==(r="clip: rect("+t[2].y+"px, "+(t[2].x+t[2].width)+"px, "+(t[2].y+t[2].height)+"px, "+t[2].x+"px)")&&S(c,"style",r),1&e&&c.src!==(a=t[0].url)&&S(c,"src",a),4&e&&d!==(d="top:"+t[2].y+"px;width:"+t[2].width+"px;height:"+t[2].height+"px;left:"+t[2].x+"px;")&&S(f,"style",d),4&e&&m!==(m="top:"+(t[2].y-5)+"px;left:"+(t[2].x-5)+"px;")&&S(p,"style",m),4&e&&w!==(w="top:"+(t[2].y+t[2].height-5)+"px;left:"+(t[2].x+t[2].width-5)+"px;")&&S(y,"style",w),8&e&&M!==(M="top:"+(t[3].y-5)+"px;left:"+(t[3].x-5)+"px;")&&S(E,"style",M)},d(n){n&&b(e),t[18](null),t[21](null),t[24](null),t[25](null),C=!1,i(O)}}}function Vi(e){let n,l,s,o,c,r;return{c(){n=x("nav"),l=x("button"),l.innerHTML='<i class="fas fa-crosshairs"></i>',s=k(),o=x("button"),o.innerHTML='<i class="fas fa-times"></i>',S(n,"slot","nav")},m(t,i){v(t,n,i),$(n,l),$(n,s),$(n,o),c||(r=[_(l,"click",e[9]),_(o,"click",e[11])],c=!0)},p:t,d(t){t&&b(n),c=!1,i(r)}}}function Yi(t){let e,n;return e=new Si({props:{icon:"inverse far fa-image",title:"Edit image focus",$$slots:{nav:[Vi],default:[Ji]},$$scope:{ctx:t}}}),t[26](e),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,[n]){const l={};268435965&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(n){t[26](null),ut(e,n)}}}function Ri(t,e,n){let l,i,s,{close:o}=e,{doc:c}=e,{file:r={}}=e,{reload:a=null}=e;if(null===r.safezone)i={x:10,y:10,width:r.width-20,height:r.height-20};else{let t=r.safezone,e=t.length/4;i={x:parseInt(t.substr(0,e),36),y:parseInt(t.substr(e,e),36),width:parseInt(t.substr(2*e,e),36),height:parseInt(t.substr(3*e,e),36)}}if(null===r.focus)s={x:Math.ceil(r.width/2),y:Math.ceil(r.height/2)};else{let t=r.focus,e=t.length/2;s={x:parseInt(t.substr(0,e),36),y:parseInt(t.substr(e,e),36)}}let u,f,d,h,p=1,m=null;return t.$$set=t=>{"close"in t&&n(13,o=t.close),"doc"in t&&n(14,c=t.doc),"file"in t&&n(0,r=t.file),"reload"in t&&n(15,a=t.reload)},[r,l,i,s,m,u,f,d,h,function(){n(2,i={x:10,y:10,width:r.width*p-20,height:r.height*p-20}),n(3,s={x:Math.ceil(r.width*p/2),y:Math.ceil(r.height*p/2)})},function(t){if(0===t.buttons&&n(4,m=!1),!m)return;let e=t.clientX-h.getBoundingClientRect().x,l=t.clientY-h.getBoundingClientRect().y;switch(m){case"bottomright":n(2,i.width=Math.floor(Math.max(10,e-i.x)),i),n(2,i.height=Math.floor(Math.max(10,l-i.y)),i);break;case"topleft":n(2,i.x=Math.floor(Math.min(r.width*p-10,Math.max(0,e))),i),n(2,i.y=Math.floor(Math.min(r.height*p-10,Math.max(0,l))),i);break;case"focus":n(3,s.x=Math.floor(Math.min(r.width*p,Math.max(0,e))),s),n(3,s.y=Math.floor(Math.min(r.height*p,Math.max(0,l))),s)}n(3,s.x=Math.max(Math.min(s.x,i.x+i.width),i.x),s),n(3,s.y=Math.max(Math.min(s.y,i.y+i.height),i.y),s),i.x+i.width>r.width*p&&n(2,i.width=r.width*p-i.x,i),i.y+i.height>r.height*p&&n(2,i.height=r.height*p-i.y,i)},function(){let t={safezone:Math.floor(i.x/p).toString(36).padStart(3,"0")+Math.floor(i.y/p).toString(36).padStart(3,"0")+Math.floor(i.width/p).toString(36).padStart(3,"0")+Math.floor(i.height/p).toString(36).padStart(3,"0"),focus:Math.floor(s.x/p).toString(36).padStart(3,"0")+Math.floor(s.y/p).toString(36).padStart(3,"0")};n(0,r.safezone=t.safezone,r),n(0,r.focus=t.focus,r),c.class.fetcher.attachment.modify(c.id,r.name,t).then(o).then(a)},function(){p=h.getBoundingClientRect().width/r.width,n(3,s.x*=p,s),n(3,s.y*=p,s),n(2,i.x*=p,i),n(2,i.y*=p,i),n(2,i.width*=p,i),n(2,i.height*=p,i)},o,c,a,()=>n(4,m="topleft"),()=>n(4,m=!1),function(t){q[t?"unshift":"push"]((()=>{f=t,n(6,f)}))},()=>n(4,m="bottomright"),()=>n(4,m=!1),function(t){q[t?"unshift":"push"]((()=>{d=t,n(7,d)}))},()=>n(4,m="focus"),()=>n(4,m=!1),function(t){q[t?"unshift":"push"]((()=>{u=t,n(5,u)}))},function(t){q[t?"unshift":"push"]((()=>{h=t,n(8,h)}))},function(t){q[t?"unshift":"push"]((()=>{l=t,n(1,l)}))}]}Ai.cbytes=Bi,Ai.toString=Ii,Ai.toNumber=Pi,Ai.objectToFormat=qi,Ai.formatToObject=Di,Ai.sizeToObject=Hi;class Ui extends dt{constructor(t){super(),ft(this,t,Ri,Yi,o,{close:13,doc:14,file:0,reload:15})}}var Wi,Ki={image:"fa-file-image",pdf:"fa-file-pdf",word:"fa-file-word",powerpoint:"fa-file-powerpoint",excel:"fa-file-excel",csv:"fa-file-csv",audio:"fa-file-audio",video:"fa-file-video",archive:"fa-file-archive",code:"fa-file-code",text:"fa-file-alt",file:"fa-file"},Xi=Object.defineProperty({default:Ki},"__esModule",{value:!0}),Zi=(Wi=Xi)&&Wi.__esModule?Wi:{default:Wi};var Gi={gif:Zi.default.image,jpeg:Zi.default.image,jpg:Zi.default.image,png:Zi.default.image,pdf:Zi.default.pdf,doc:Zi.default.word,docx:Zi.default.word,ppt:Zi.default.powerpoint,pptx:Zi.default.powerpoint,xls:Zi.default.excel,xlsx:Zi.default.excel,csv:Zi.default.csv,aac:Zi.default.audio,mp3:Zi.default.audio,ogg:Zi.default.audio,avi:Zi.default.video,flv:Zi.default.video,mkv:Zi.default.video,mp4:Zi.default.video,gz:Zi.default.archive,zip:Zi.default.archive,css:Zi.default.code,html:Zi.default.code,js:Zi.default.code,txt:Zi.default.text},ts=Object.defineProperty({default:Gi},"__esModule",{value:!0}),es=function(t){return t&&t.__esModule?t:{default:t}}(Xi);var ns={"image/gif":es.default.image,"image/jpeg":es.default.image,"image/png":es.default.image,"application/pdf":es.default.pdf,"application/msword":es.default.word,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":es.default.word,"application/mspowerpoint":es.default.powerpoint,"application/vnd.openxmlformats-officedocument.presentationml.presentation":es.default.powerpoint,"application/msexcel":es.default.excel,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":es.default.excel,"text/csv":es.default.csv,"audio/aac":es.default.audio,"audio/wav":es.default.audio,"audio/mpeg":es.default.audio,"audio/mp4":es.default.audio,"audio/ogg":es.default.audio,"video/x-msvideo":es.default.video,"video/mpeg":es.default.video,"video/mp4":es.default.video,"video/ogg":es.default.video,"video/quicktime":es.default.video,"video/webm":es.default.video,"application/gzip":es.default.archive,"application/zip":es.default.archive,"text/css":es.default.code,"text/html":es.default.code,"text/javascript":es.default.code,"application/javascript":es.default.code,"text/plain":es.default.text,"text/richtext":es.default.text,"text/rtf":es.default.text},ls=Object.defineProperty({default:ns},"__esModule",{value:!0}),is=function(t){return ss.default[t.toLowerCase()]||os.default.file},ss=cs(ts);cs(ls);var os=cs(Xi);function cs(t){return t&&t.__esModule?t:{default:t}}function rs(t,e,n){const l=t.slice();return l[24]=e[n][0],l[25]=e[n][1],l[26]=e,l[27]=n,l}function as(t){let e,n,l,i,s,o=t[2].width+"",c=t[2].height+"";return{c(){e=x("div"),n=w("dimensions: "),l=w(o),i=w(" x "),s=w(c),S(e,"class","Qhud3le")},m(t,o){v(t,e,o),$(e,n),$(e,l),$(e,i),$(e,s)},p(t,e){4&e&&o!==(o=t[2].width+"")&&C(l,o),4&e&&c!==(c=t[2].height+"")&&C(s,c)},d(t){t&&b(e)}}}function us(t){let e,n,l,s,o,c,r,a,u;function f(){t[20].call(n,t[26],t[27])}function d(){t[21].call(s,t[26],t[27])}function h(){return t[22](t[27])}return{c(){e=x("div"),n=x("input"),l=k(),s=x("input"),o=k(),c=x("i"),r=k(),S(n,"class","key Qhud3le"),S(n,"placeholder","key"),S(s,"class","value Qhud3le"),S(s,"placeholder","value"),S(c,"class","fas fa-minus-circle Qhud3le"),S(e,"class","property Qhud3le")},m(i,p){v(i,e,p),$(e,n),O(n,t[24]),$(e,l),$(e,s),O(s,t[25]),$(e,o),$(e,c),$(e,r),a||(u=[_(n,"input",f),_(s,"input",d),_(c,"click",h)],a=!0)},p(e,l){t=e,256&l&&n.value!==t[24]&&O(n,t[24]),256&l&&s.value!==t[25]&&O(s,t[25])},d(t){t&&b(e),a=!1,i(u)}}}function fs(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,Q,E,M,z,T,j,F,L,N,A,B=t[2].url+"",I=Ai(t[2].size,{separator:"",decimals:1})+"",P=t[2].size.toLocaleString()+"",q=t[2].isImage&&as(t),D=t[8],H=[];for(let e=0;e<D.length;e+=1)H[e]=us(rs(t,D,e));return{c(){e=x("main"),n=x("div"),l=x("input"),s=k(),o=x("div"),c=x("input"),r=k(),a=x("div"),u=w("url: "),f=w(B),d=k(),h=x("div"),p=w("file size: "),m=w(I),g=w(" ("),Q=w(P),E=w(")"),M=k(),q&&q.c(),z=k(),T=x("div"),j=w("properties:"),F=x("i"),L=k();for(let t=0;t<H.length;t+=1)H[t].c();S(l,"placeholder","filename"),S(l,"type","text"),S(l,"class","Qhud3le"),S(n,"class","Qhud3le"),S(c,"placeholder","title"),S(c,"type","text"),S(c,"class","Qhud3le"),S(o,"class","Qhud3le"),S(a,"class","url Qhud3le"),S(h,"class","Qhud3le"),S(F,"class","fas fa-plus-circle Qhud3le"),S(T,"class","properties Qhud3le"),S(e,"class","Qhud3le")},m(i,b){v(i,e,b),$(e,n),$(n,l),O(l,t[5]),$(e,s),$(e,o),$(o,c),O(c,t[6]),$(e,r),$(e,a),$(a,u),$(a,f),$(e,d),$(e,h),$(h,p),$(h,m),$(h,g),$(h,Q),$(h,E),$(e,M),q&&q.m(e,null),$(e,z),$(e,T),$(T,j),$(T,F),$(e,L);for(let t=0;t<H.length;t+=1)H[t].m(e,null);N||(A=[_(l,"input",t[16]),_(c,"input",t[17]),_(a,"click",t[18]),_(F,"click",t[19])],N=!0)},p(t,n){if(32&n&&l.value!==t[5]&&O(l,t[5]),64&n&&c.value!==t[6]&&O(c,t[6]),4&n&&B!==(B=t[2].url+"")&&C(f,B),4&n&&I!==(I=Ai(t[2].size,{separator:"",decimals:1})+"")&&C(m,I),4&n&&P!==(P=t[2].size.toLocaleString()+"")&&C(Q,P),t[2].isImage?q?q.p(t,n):(q=as(t),q.c(),q.m(e,z)):q&&(q.d(1),q=null),1280&n){let l;for(D=t[8],l=0;l<D.length;l+=1){const i=rs(t,D,l);H[l]?H[l].p(i,n):(H[l]=us(i),H[l].c(),H[l].m(e,null))}for(;l<H.length;l+=1)H[l].d(1);H.length=D.length}},d(t){t&&b(e),q&&q.d(),y(H,t),N=!1,i(A)}}}function ds(e){let n,l,i;return{c(){n=x("button"),n.innerHTML='<i class="fas fa-image"></i>'},m(t,s){v(t,n,s),l||(i=_(n,"click",e[15]),l=!0)},p:t,d(t){t&&b(n),l=!1,i()}}}function hs(t){let e,n,l,o,c,r,a,u=t[2].isImage&&ds(t);return{c(){e=x("nav"),u&&u.c(),n=k(),l=x("button"),l.innerHTML='<i class="fas fa-trash-alt"></i>',o=k(),c=x("button"),c.innerHTML='<i class="fas fa-times"></i>',S(e,"slot","nav")},m(i,f){v(i,e,f),u&&u.m(e,null),$(e,n),$(e,l),$(e,o),$(e,c),r||(a=[_(l,"click",t[13]),_(c,"click",(function(){s(t[0])&&t[0].apply(this,arguments)}))],r=!0)},p(l,i){(t=l)[2].isImage?u?u.p(t,i):(u=ds(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null)},d(t){t&&b(e),u&&u.d(),r=!1,i(a)}}}function ps(e){let n,l,i,s;return{c(){n=x("footer"),l=x("button"),l.textContent="Save changes",S(l,"class","primary"),S(n,"slot","footer")},m(t,o){v(t,n,o),$(n,l),i||(s=_(l,"click",e[12]),i=!0)},p:t,d(t){t&&b(n),i=!1,s()}}}function ms(t){let e,n,l={icon:t[7],title:"File details",$$slots:{footer:[ps],nav:[hs],default:[fs]},$$scope:{ctx:t}};return e=new Si({props:l}),t[23](e),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,[n]){const l={};128&n&&(l.icon=t[7]),268435823&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(n){t[23](null),ut(e,n)}}}function gs(t,e,n){let l,i,s,o,r,{collection:a=null}=e,{close:u}=e,{doc:f}=e,{file:h={}}=e,{reload:p=null}=e,m=bt([]);function g(t){m.update((e=>(e.splice(t,1),e)))}function $(){m.update((t=>[...t,["",""]]))}c(t,m,(t=>n(8,i=t))),B((()=>{d(m,i="object"!=typeof h.properties||h.properties instanceof Array?[]:[...Object.entries(h.properties)],i),n(5,o=h.name),n(6,r=h.title)}));return t.$$set=t=>{"collection"in t&&n(14,a=t.collection),"close"in t&&n(0,u=t.close),"doc"in t&&n(1,f=t.doc),"file"in t&&n(2,h=t.file),"reload"in t&&n(3,p=t.reload)},t.$$.update=()=>{4&t.$$.dirty&&n(7,l="inverse far "+is(h.name.split(".").pop()))},[u,f,h,p,s,o,r,l,i,m,g,$,function(){m.update((t=>t.map((t=>[t[0].trim(),t[1].trim()])))),m.update((t=>[...Object.entries(Object.fromEntries(t))]));let t={newname:o,title:r,properties:Object.fromEntries(i)};f.class.fetcher.attachment.modify(f.id,h.name,t).then(u).then(p)},function(){confirm("Remove file: "+h.name+"\nAre you sure?")&&f.class.fetcher.attachment.remove(a,f.id,h.name).then(u).then(p)},a,()=>{De.show(Ui,{file:h,doc:f,reload:p})},function(){o=this.value,n(5,o)},function(){r=this.value,n(6,r)},()=>{navigator.clipboard.writeText(h.url),xt.info("URL copied to clipboard")},()=>$(),function(t,e){t[e][0]=this.value,m.set(i)},function(t,e){t[e][1]=this.value,m.set(i)},t=>g(t),function(t){q[t?"unshift":"push"]((()=>{s=t,n(4,s)}))}]}class $s extends dt{constructor(t){super(),ft(this,t,gs,ms,o,{collection:14,close:0,doc:1,file:2,reload:3})}}function vs(t){let e,n;return{c(){e=x("i"),S(e,"class",n=f(t[3])+" Q1fxwff1")},m(t,n){v(t,e,n)},p(t,l){8&l&&n!==(n=f(t[3])+" Q1fxwff1")&&S(e,"class",n)},d(t){t&&b(e)}}}function bs(t){let e,n,l,i,s,o,c,r=t[0].width+"",a=t[0].height+"";return{c(){e=x("img"),l=k(),i=x("div"),s=w(r),o=w("x"),c=w(a),S(e,"alt",""),e.src!==(n=t[0].thumbnail)&&S(e,"src",n),S(e,"width","100"),S(e,"height","100"),S(e,"draggable","false"),S(i,"class","dimensions Q1fxwff1")},m(t,n){v(t,e,n),v(t,l,n),v(t,i,n),$(i,s),$(i,o),$(i,c)},p(t,l){1&l&&e.src!==(n=t[0].thumbnail)&&S(e,"src",n),1&l&&r!==(r=t[0].width+"")&&C(s,r),1&l&&a!==(a=t[0].height+"")&&C(c,a)},d(t){t&&b(e),t&&b(l),t&&b(i)}}}function ys(e){let n,l,s,o,c,r,a,u,f,d,h=e[0].name+"",p=Ai(e[0].size,{separator:"",decimals:0})+"";function m(t,e){return t[0].isImage?bs:vs}let g=m(e),y=g(e);return{c(){n=x("section"),l=x("div"),y.c(),s=k(),o=x("span"),c=w(h),r=k(),a=x("span"),u=w(p),S(l,"class","preview Q1fxwff1"),S(o,"class","name Q1fxwff1"),S(a,"class","data Q1fxwff1"),S(n,"class","file Q1fxwff1"),S(n,"draggable","true"),F(n,"right",e[2]),F(n,"left",e[1])},m(t,i){v(t,n,i),$(n,l),y.m(l,null),$(n,s),$(n,o),$(o,c),$(n,r),$(n,a),$(a,u),f||(d=[_(n,"click",e[4]),_(n,"dragleave",e[6]),_(n,"drop",e[8]),_(n,"dragstart",e[7]),_(n,"dragover",e[5])],f=!0)},p(t,[e]){g===(g=m(t))&&y?y.p(t,e):(y.d(1),y=g(t),y&&(y.c(),y.m(l,null))),1&e&&h!==(h=t[0].name+"")&&C(c,h),1&e&&p!==(p=Ai(t[0].size,{separator:"",decimals:0})+"")&&C(u,p),4&e&&F(n,"right",t[2]),2&e&&F(n,"left",t[1])},i:t,o:t,d(t){t&&b(n),y.d(),f=!1,i(d)}}}function xs(t,e,n){let l,{file:i={}}=e,{doc:s=null}=e,{index:o=null}=e,{reload:c=null}=e,{collection:r=null}=e,a=!1,u=!1;return t.$$set=t=>{"file"in t&&n(0,i=t.file),"doc"in t&&n(9,s=t.doc),"index"in t&&n(10,o=t.index),"reload"in t&&n(11,c=t.reload),"collection"in t&&n(12,r=t.collection)},t.$$.update=()=>{1&t.$$.dirty&&n(3,l="far "+is(i.name.split(".").pop()))},[i,a,u,l,function(){De.show($s,{file:i,doc:s,reload:c,collection:r})},function(t){"attachment"===t.dataTransfer.types[0]&&r===t.dataTransfer.types[1]&&(t.target.clientWidth/2<t.offsetX?(n(2,u=!0),n(1,a=!1)):(n(1,a=!0),n(2,u=!1)),t.stopPropagation(),t.preventDefault())},function(t){n(1,a=!1),n(2,u=!1)},function(t){t.dataTransfer.setData("attachment","1"),t.dataTransfer.setData(r,"1"),t.dataTransfer.setData("file",i.name),t.dataTransfer.setData("collection",r)},function(t){"attachment"===t.dataTransfer.types[0]&&r===t.dataTransfer.types[1]&&(s.class.fetcher.attachment.order(s.id,r,t.dataTransfer.getData("file"),o+(u?1:0)).then(c),n(1,a=!1),n(2,u=!1))},s,o,c,r]}class ws extends dt{constructor(t){super(),ft(this,t,xs,ys,o,{file:0,doc:9,index:10,reload:11,collection:12})}}function ks(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function Qs(t){let e,n;return e=new ws({props:{file:t[15],doc:t[2],collection:t[0],reload:t[3],index:t[17]}}),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){const l={};64&n&&(l.file=t[15]),4&n&&(l.doc=t[2]),1&n&&(l.collection=t[0]),8&n&&(l.reload=t[3]),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function _s(t){let e,n,l,s,o,c,r,a,u,f,d,h,p,m,g,Q,M=t[6],O=[];for(let e=0;e<M.length;e+=1)O[e]=Qs(ks(t,M,e));const T=t=>lt(O[t],1,1,(()=>{O[t]=null}));return{c(){e=x("section"),n=x("input"),l=k(),s=x("div"),o=x("b"),c=w(t[1]),r=x("span"),a=w("("),u=w(t[0]),f=w(")"),d=x("i"),h=k(),p=x("div");for(let t=0;t<O.length;t+=1)O[t].c();n.multiple=!0,S(n,"type","file"),z(n,"display","none"),S(r,"class","Q1x3zdau"),S(d,"class","far fa-folder-open Q1x3zdau"),S(s,"class","block-label Q1x3zdau"),S(p,"class","files Q1x3zdau"),S(e,"class","block Q1x3zdau"),F(e,"over",t[5])},m(i,b){v(i,e,b),$(e,n),t[12](n),$(e,l),$(e,s),$(s,o),$(o,c),$(s,r),$(r,a),$(r,u),$(r,f),$(s,d),$(e,h),$(e,p);for(let t=0;t<O.length;t+=1)O[t].m(p,null);m=!0,g||(Q=[_(n,"change",t[8]),_(d,"click",t[13]),_(e,"dragover",t[9]),_(e,"drop",t[10]),_(e,"dragleave",t[14]),_(e,"dragover",E(Es))],g=!0)},p(t,[n]){if((!m||2&n)&&C(c,t[1]),(!m||1&n)&&C(u,t[0]),77&n){let e;for(M=t[6],e=0;e<M.length;e+=1){const l=ks(t,M,e);O[e]?(O[e].p(l,n),nt(O[e],1)):(O[e]=Qs(l),O[e].c(),nt(O[e],1),O[e].m(p,null))}for(tt(),e=M.length;e<O.length;e+=1)T(e);et()}32&n&&F(e,"over",t[5])},i(t){if(!m){for(let t=0;t<M.length;t+=1)nt(O[t]);m=!0}},o(t){O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)lt(O[t]);m=!1},d(n){n&&b(e),t[12](null),y(O,n),g=!1,i(Q)}}}const Es=()=>{};function Ms(t,e,n){let l,i,{name:s=""}=e,{label:o=""}=e,{doc:r=null}=e,{reload:a=null}=e,u=bt([]);c(t,u,(t=>n(6,l=t)));let{get:f=(()=>{r.class.fetcher.attachment.get(r.id,s).then((t=>d(u,l=t??[],l)))})}=e;f();let h=!1;return t.$$set=t=>{"name"in t&&n(0,s=t.name),"label"in t&&n(1,o=t.label),"doc"in t&&n(2,r=t.doc),"reload"in t&&n(3,a=t.reload),"get"in t&&n(11,f=t.get)},[s,o,r,a,i,h,l,u,function(){let t=[];[...i.files].forEach((e=>{t.push(r.class.fetcher.attachment.upload(s,e,r.id))})),Promise.all(t).then((t=>f())).then((()=>n(4,i.value="",i)))},function(t){"attachment"===t.dataTransfer.types[0]&&t.dataTransfer.types[1]!==s&&n(5,h=!0)},function(t){h&&r.class.fetcher.attachment.add(r.id,s,t.dataTransfer.getData("file"),t.shiftKey?null:t.dataTransfer.getData("collection")).then(a),n(5,h=!1)},f,function(t){q[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},()=>{i.click()},()=>n(5,h=!1)]}class Ss extends dt{constructor(t){super(),ft(this,t,Ms,_s,o,{name:0,label:1,doc:2,reload:3,get:11})}get name(){return this.$$.ctx[0]}set name(t){this.$set({name:t}),K()}get label(){return this.$$.ctx[1]}set label(t){this.$set({label:t}),K()}get doc(){return this.$$.ctx[2]}set doc(t){this.$set({doc:t}),K()}get reload(){return this.$$.ctx[3]}set reload(t){this.$set({reload:t}),K()}get get(){return this.$$.ctx[11]}set get(t){this.$set({get:t}),K()}}function Cs(t,e,n){const l=t.slice();return l[8]=e[n],l[9]=e,l[10]=n,l}function Os(t){let e,n,l=t[10];const i=()=>t[6](e,l),s=()=>t[6](null,l);let o={name:t[8].name,label:t[8].label,doc:t[1],reload:t[5]};return e=new Ss({props:o}),i(),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,n){l!==t[10]&&(s(),l=t[10],i());const o={};4&n&&(o.name=t[8].name),4&n&&(o.label=t[8].label),2&n&&(o.doc=t[1]),e.$set(o)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){s(),ut(e,t)}}}function zs(t){let e,n,l=t[2],i=[];for(let e=0;e<l.length;e+=1)i[e]=Os(Cs(t,l,e));const s=t=>lt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=x("main");for(let t=0;t<i.length;t+=1)i[t].c();S(e,"class","Q1y0tsmp")},m(t,l){v(t,e,l);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(54&n){let o;for(l=t[2],o=0;o<l.length;o+=1){const s=Cs(t,l,o);i[o]?(i[o].p(s,n),nt(i[o],1)):(i[o]=Os(s),i[o].c(),nt(i[o],1),i[o].m(e,null))}for(tt(),o=l.length;o<i.length;o+=1)s(o);et()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)lt(i[t]);n=!1},d(t){t&&b(e),y(i,t)}}}function Ts(t){let e,n,l,i;return{c(){e=x("nav"),n=x("button"),n.innerHTML='<i class="fas fa-times"></i>',S(e,"slot","nav")},m(o,c){v(o,e,c),$(e,n),l||(i=_(n,"click",(function(){s(t[0])&&t[0].apply(this,arguments)})),l=!0)},p(e,n){t=e},d(t){t&&b(e),l=!1,i()}}}function js(t){let e,n;return e=new Si({props:{icon:"inverse far fa-folder-open",title:"Attachments",big:!0,$$slots:{nav:[Ts],default:[zs]},$$scope:{ctx:t}}}),t[7](e),{c(){rt(e.$$.fragment)},m(t,l){at(e,t,l),n=!0},p(t,[n]){const l={};2071&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(n){t[7](null),ut(e,n)}}}function Fs(t,e,n){let l,{close:i=(()=>console.log("close"))}=e,{doc:s}=e,{categories:o=null}=e;let c=[];return t.$$set=t=>{"close"in t&&n(0,i=t.close),"doc"in t&&n(1,s=t.doc),"categories"in t&&n(2,o=t.categories)},[i,s,o,l,c,function(){c.forEach((t=>t.get()))},function(t,e){q[t?"unshift":"push"]((()=>{c[e]=t,n(4,c)}))},function(t){q[t?"unshift":"push"]((()=>{l=t,n(3,l)}))}]}class Ls extends dt{constructor(t){super(),ft(this,t,Fs,js,o,{close:0,doc:1,categories:2})}}let Ns={attachment:function(t){return t=Object.values(t),new yi("far fa-folder-open","attachments",(e=>De.show(Ls,{doc:e,categories:t})),(t=>t.exists))},save:function(){return new yi("far fa-save","save",(t=>t.save()))},delete:function(){return new yi("fas fa-times","delete",(t=>t.delete()),(t=>t.exists))}},As={reload:function(t){return Ut.Action("fas fa-recycle","",(t=>t.reload()))},add:function(t){return Ut.Action("fas fa-plus","",(e=>t.open(null)))}};var Bs={avatar:{name:"avatar",label:"avatar","max-count":1,"max-size":524288,"mime-type":"/image\\/.*/"}};let Is,Ps,qs={attachments:{field:"attachments",label:"attachments",type:"JsonField",readonly:!0},created:{field:"created",label:"created",type:"DateTimeField",readonly:!0},email:{field:"email",label:"email",type:"StringField",readonly:!1},group:{field:"group",label:"group",type:"EnumField",readonly:!1,options:{admin:"adminisztrátor",moderator:"moderator",visitor:"visitor"}},guid:{field:"guid",label:"guid",type:"StringField",readonly:!0},id:{field:"id",label:"id",type:"IntField",readonly:!0},name:{field:"name",label:"name",type:"StringField",readonly:!1},password:{field:"password",label:"password",type:"StringField",readonly:!0},updated:{field:"updated",label:"updated",type:"DateTimeField",readonly:!1}};Is=ne.create("Users","fas fa-users",100,[Ut.Sorting("name",!0).asc("name")],"/magic/user",{component:kn.Component,cardify:t=>kn.Cardify(t.id,(()=>Ps.open(t.id)),t.name,!0,null,null,[],[kn.Property("created",t.created),kn.Property("updated",t.updated)],[])}),Ps=bi.create(Is,"user","far fa-user","/magic/user",(t=>t.name??"new user")),Is.addAction(As.reload(Is)),Is.addAction(As.add(Ps)),Ps.addAction(Ns.attachment(Bs)),Ps.addAction(Ns.save()),Ps.addAction(Ns.delete()),Ps.addSection("User properties",!1).add(bi.inputs.string(qs.name),bi.inputs.string(qs.email),bi.inputs.select(qs.group).options(qs.group.options),bi.inputs.string("setpassword","password"));let Ds=[Lt.List("Users","fas fa-users",Is).activate()];window.addEventListener("load",(()=>{kt.update((t=>({...t,menu:Ds,lists:[Is]}))),new ln({target:document.body})}))}();
//# sourceMappingURL=index.js.map
